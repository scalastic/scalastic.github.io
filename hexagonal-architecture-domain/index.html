<!DOCTYPE html><html lang="fr"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="canonical" href="https://scalastic.io/hexagonal-architecture-domain/"><link rel="alternate" hreflang="fr" href="https://scalastic.io/hexagonal-architecture-domain/"><link rel="alternate" hreflang="en" href="https://scalastic.io/en/hexagonal-architecture-domain/"><title>Le Guide Ultime pour Maîtriser l'Architecture Hexagonale : Focus sur le Domaine</title><meta name="title" content="Le Guide Ultime pour Maîtriser l'Architecture Hexagonale : Focus sur le Domaine"><meta name="description" content="Découvrez le guide ultime pour maîtriser l'architecture hexagonale. Focus sur le domaine et les meilleures pratiques pour structurer votre application."><meta name="url" content="https://scalastic.io/hexagonal-architecture-domain/"><meta name="robots" content="index, follow"><meta name="language" content="fr"><meta name="author" content="Jean-Jerome Levy"><meta name="distribution" content="global"><meta name="rating" content="general"><meta name="application-name" content="Scalastic"><meta name="generator" content="Jekyll"><meta property="og:title" content="Le Guide Ultime pour Maîtriser l'Architecture Hexagonale : Focus sur le Domaine"><meta property="og:description" content="Découvrez le guide ultime pour maîtriser l'architecture hexagonale. Focus sur le domaine et les meilleures pratiques pour structurer votre application."><meta property="og:url" content="https://scalastic.io/hexagonal-architecture-domain/"><meta property="og:image" content="https://scalastic.io/assets/img/hexagonal-architecture-domain.jpg"><meta property="og:locale" content="fr_FR"><meta property="og:site_name" content="Scalastic"><meta property="og:type" content="article"><meta property="article:author" content="https://www.linkedin.com/in/jean-jerome-levy"><meta property="article:published_time" content="2024-10-03T14:32:00+02:00"><meta property="article:modified_time" content="2024-10-06T13:05:11+02:00"><meta property="article:section" content="Technology"><meta property="article:tag" content="Hexagonal-Architecture"><meta property="article:tag" content="Domain"><meta property="article:tag" content="Software-Design"><meta property="article:tag" content="Clean-Architecture"><meta property="article:tag" content="Craftsmanship"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Le Guide Ultime pour Maîtriser l'Architecture Hexagonale : Focus sur le Domaine"><meta name="twitter:description" content="Découvrez le guide ultime pour maîtriser l'architecture hexagonale. Focus sur le domaine et les meilleures pratiques pour structurer votre application."><meta name="twitter:url" content="https://scalastic.io/hexagonal-architecture-domain/"><meta name="twitter:image" content="https://scalastic.io/assets/img/hexagonal-architecture-domain.jpg"> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "BlogPosting", "url": "https://scalastic.io/hexagonal-architecture-domain/", "headline": "Le Guide Ultime pour Maîtriser l'Architecture Hexagonale : Focus sur le Domaine", "description": "Découvrez le guide ultime pour maîtriser l'architecture hexagonale. Focus sur le domaine et les meilleures pratiques pour structurer votre application.", "mainEntityOfPage":{ "@type": "WebPage", "@id": "https://scalastic.io/hexagonal-architecture-domain/" }, "image": [ "https://scalastic.io/assets/img/hexagonal-architecture-domain.jpg" ], "datePublished": "2024-10-03T14:32:00+02:00", "dateModified": "2024-10-06T13:05:11+02:00", "keywords": [ ["Hexagonal-Architecture", "Domain", "Software-Design", "Clean-Architecture", "Craftsmanship"] ], "isAccessibleForFree": "True", "isPartOf": { "@type": ["CreativeWork", "Product", "WebSite"], "name": "Scalastic", "productID": "scalastic.io" }, "inLanguage": "fr-FR", "license": "https://creativecommons.org/licenses/by-nc-nd/4.0/", "author": { "@type": "Person", "name": "Jean-Jerome Levy", "description": "Professionnel chevronné dans le domaine de l’informatique, cumulant plus de 20 années d’expérience au sein de DSI de grandes entreprises, mon expertise diversifiée m’a permis de jouer un rôle clé dans de nombreux projets, caractérisés par la mise en place de pratiques DevOps innovantes.", "jobTitle": "Consultant DevOps", "sameAs":[ "https://www.linkedin.com/in/jean-jerome-levy", "https://github.com/jeanjerome", "https://github.com/scalastic", "https://hub.docker.com/u/jeanjerome" ] }, "publisher": { "@type": "Organization", "name": "Scalastic", "description": "Une société spécialisée dans le DevOps et le Cloud", "url": "https://scalastic.io", "sameAs": [ "https://github.com/scalastic" ], "logo": { "@type": "ImageObject", "url": "https://scalastic.io/assets/img/logo-scalastic.svg" } } } </script><link rel="mask-icon" href="https://scalastic.io/pinned-scalastic.svg" color="#000000"><link rel="alternate icon" type="image/png" href="https://scalastic.io/favicon.png"><link rel="icon" type="image/svg+xml" href="https://scalastic.io/favicon.svg"><meta name="theme-color" content="#515151"><meta name="color-scheme" content="light dark"><meta name="coverage" content="Worldwide" ><meta name="distribution" content="Global" ><meta name="HandheldFriendly" content="True" ><meta name="msapplication-tap-highlight" content="no" ><link rel="apple-touch-icon" href="https://scalastic.io/favicon-36.png"><link rel="apple-touch-icon" sizes="180x180" href="https://scalastic.io/favicon-180-precomposed.png"><meta name="apple-mobile-web-app-title" content="Scalastic"><link rel="manifest" href="/manifest.webmanifest"><style> @font-face { font-family: 'Mulish'; font-style: normal; font-display: swap; src: url(/assets/fonts/mulish.woff2) format('woff2'); unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD; }</style><script> localStorage.getItem('darkMode') === 'true' && document.documentElement.setAttribute('data-mode', 'dark'); </script><link rel="stylesheet" href="/assets/css/main.css" ></head><body><div class="wrapper"><aside class="sidebar"><header><div class="about"><div class="cover-logo"> <a href="https://scalastic.io/" aria-label="Accueil"> <svg class="logo" viewBox="0 0 453 121" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"> <g id="logo"> <g id="label"><path id="Scalastic" d="M134.905 97.588 C130.07 97.588 126.312 96.33 123.633 93.815 120.955 91.299 119.616 87.364 119.616 82.006 119.616 77.498 120.515 72.532 122.311 67.11 124.108 61.687 126.982 57 130.934 53.047 134.887 49.095 139.901 47.118 145.977 47.118 149.897 47.118 152.69 47.968 154.356 49.666 156.022 51.365 156.856 53.52 156.856 56.133 156.856 58.42 156.365 60.185 155.385 61.426 154.405 62.667 153.165 63.287 151.663 63.287 150.552 63.287 149.407 62.896 148.231 62.112 149.015 59.956 149.409 58.029 149.409 56.33 149.409 55.089 149.179 54.11 148.721 53.391 148.264 52.672 147.579 52.313 146.665 52.313 144.705 52.313 142.744 53.912 140.784 57.114 138.824 60.315 137.222 64.202 135.981 68.776 134.74 73.349 134.12 77.465 134.12 81.123 134.12 84.325 134.675 86.498 135.786 87.641 136.896 88.784 138.694 89.356 141.176 89.356 144.704 89.356 147.726 88.54 150.241 86.907 152.401 85.504 154.743 83.474 157.264 80.819 157.387 76.282 158.343 71.533 160.139 66.571 162.067 61.246 164.94 56.739 168.762 53.047 172.584 49.356 177.142 47.51 182.434 47.51 185.113 47.51 187.106 47.967 188.413 48.881 189.719 49.796 190.372 51.005 190.372 52.508 L190.372 53.194 191.45 48 205.561 48 198.507 81.321 C198.245 82.301 198.114 83.345 198.114 84.455 198.114 87.265 199.453 88.67 202.132 88.67 203.961 88.67 205.546 87.82 206.885 86.121 208.225 84.423 209.285 82.201 210.069 79.457 L220.555 30.36 235.059 28.401 223.79 81.321 C223.528 82.301 223.397 83.345 223.397 84.455 223.397 85.762 223.708 86.693 224.329 87.248 224.949 87.804 225.979 88.082 227.417 88.082 229.311 88.082 231.074 87.283 232.708 85.682 233.599 84.808 234.354 83.791 234.973 82.635 234.967 82.363 234.962 82.09 234.962 81.811 234.962 76.976 235.925 71.895 237.852 66.571 239.78 61.246 242.655 56.739 246.477 53.047 250.299 49.356 254.855 47.51 260.147 47.51 262.826 47.51 264.819 47.967 266.126 48.881 267.432 49.796 268.087 51.005 268.087 52.508 L268.087 53.194 269.165 48 283.276 48 276.219 81.321 C275.958 82.301 275.829 83.345 275.829 84.455 275.829 87.265 277.168 88.67 279.846 88.67 281.676 88.67 283.259 87.82 284.598 86.121 284.628 86.084 284.657 86.044 284.686 86.006 284.661 85.687 284.647 85.366 284.647 85.043 284.647 82.887 285.154 81.009 286.167 79.409 287.179 77.808 288.405 76.649 289.842 75.93 292.39 71.357 294.612 66.734 296.507 62.063 298.401 57.391 300.197 52.345 301.895 46.922 L316.399 44.961 C316.726 53.324 317.281 62.373 318.065 72.108 318.392 76.028 318.555 78.869 318.555 80.633 318.555 82.136 318.426 83.378 318.165 84.358 321.235 82.594 323.586 80.96 325.219 79.457 L331.1 51.92 327.866 51.92 328.649 48 331.883 48 334.825 34.477 349.329 32.516 345.997 48 351.876 48 351.092 51.92 345.212 51.92 338.94 81.321 C338.679 82.301 338.548 83.345 338.548 84.455 338.548 85.762 338.859 86.693 339.479 87.248 340.1 87.804 341.128 88.082 342.565 88.082 344.46 88.082 346.225 87.283 347.858 85.682 349.491 84.081 350.667 82.005 351.385 79.457 L358.049 48 372.163 48 365.106 81.321 C364.845 82.301 364.714 83.345 364.714 84.455 364.714 85.762 365.025 86.693 365.645 87.248 366.266 87.804 367.294 88.082 368.731 88.082 370.626 88.082 372.391 87.283 374.024 85.682 374.626 85.093 375.164 84.437 375.641 83.719 375.609 83.165 375.592 82.595 375.592 82.006 375.592 77.498 376.491 72.532 378.288 67.11 380.084 61.687 382.958 57 386.911 53.047 390.863 49.095 395.878 47.118 401.954 47.118 405.939 47.118 408.748 47.968 410.382 49.666 412.015 51.365 412.833 53.554 412.833 56.233 412.833 58.585 412.326 60.348 411.313 61.524 410.301 62.7 409.075 63.287 407.637 63.287 406.396 63.287 405.253 62.896 404.208 62.112 404.992 60.021 405.383 58.094 405.383 56.33 405.383 53.652 404.503 52.313 402.739 52.313 400.779 52.313 398.818 53.928 396.858 57.162 394.898 60.396 393.281 64.252 392.007 68.727 390.733 73.202 390.096 77.074 390.096 80.34 390.096 85.763 392.055 88.475 395.975 88.475 397.739 88.475 399.716 87.936 401.905 86.858 404.094 85.78 406.036 84.522 407.735 83.084 405.971 92.754 400.321 97.588 390.782 97.588 386.013 97.588 382.289 96.33 379.61 93.815 378.38 92.659 377.432 91.203 376.766 89.448 375.418 91.303 373.948 92.759 372.358 93.815 368.569 96.33 364.813 97.588 361.089 97.588 357.953 97.588 355.42 96.609 353.493 94.649 352.141 93.274 351.266 91.417 350.862 89.078 349.442 91.11 347.886 92.69 346.192 93.815 342.403 96.33 338.647 97.588 334.923 97.588 331.787 97.588 329.254 96.609 327.327 94.649 325.4 92.689 324.436 89.748 324.436 85.828 324.436 85.386 324.457 84.905 324.495 84.391 321.444 87.137 318.061 89.576 314.342 91.707 312.448 93.733 310.111 95.219 307.335 96.166 304.558 97.114 301.765 97.588 298.956 97.588 295.82 97.588 293.174 96.984 291.018 95.776 288.862 94.567 287.261 92.998 286.216 91.071 286.17 90.986 286.126 90.901 286.083 90.817 285.088 92.034 284.037 93.034 282.932 93.815 279.372 96.33 275.795 97.588 272.202 97.588 269.458 97.588 267.253 96.821 265.587 95.285 263.921 93.75 262.925 91.513 262.598 88.573 260.704 91.251 258.595 93.422 256.276 95.088 253.957 96.754 251.198 97.588 247.997 97.588 244.273 97.588 241.169 96.314 238.686 93.766 237.438 92.485 236.504 90.84 235.883 88.832 234.418 90.984 232.804 92.645 231.042 93.815 227.252 96.33 223.496 97.588 219.772 97.588 216.636 97.588 214.104 96.609 212.176 94.649 210.849 93.299 209.98 91.484 209.567 89.203 208.227 91.176 206.779 92.713 205.219 93.815 201.659 96.33 198.082 97.588 194.489 97.588 191.745 97.588 189.54 96.821 187.874 95.285 186.208 93.75 185.21 91.513 184.883 88.573 182.989 91.251 180.883 93.422 178.563 95.088 176.244 96.754 173.483 97.588 170.282 97.588 166.558 97.588 163.454 96.314 160.971 93.766 159.132 91.878 157.975 89.199 157.499 85.733 151.099 93.635 143.569 97.588 134.905 97.588 Z M295.819 89.846 C298.236 89.846 300.262 89.127 301.895 87.69 303.529 86.252 304.346 83.934 304.346 80.733 304.346 78.773 304.15 76.028 303.758 72.5 303.105 65.052 302.679 60.054 302.483 57.506 300.915 62.668 298.27 68.841 294.546 76.028 296.048 76.812 296.799 77.955 296.799 79.457 296.799 80.699 296.392 81.809 295.575 82.789 294.758 83.769 293.73 84.26 292.489 84.26 291.507 84.26 290.778 84.042 290.298 83.608 290.171 83.898 290.044 84.185 289.915 84.465 290.078 86.078 290.526 87.317 291.262 88.18 292.21 89.291 293.728 89.846 295.819 89.846 Z M176.651 88.082 C178.284 88.082 179.902 87.315 181.503 85.78 183.103 84.244 184.198 82.136 184.786 79.457 L189.491 57.311 C189.491 56.462 189.164 55.628 188.51 54.811 187.857 53.994 186.843 53.586 185.471 53.586 182.858 53.586 180.507 55.105 178.417 58.143 176.326 61.181 174.692 64.84 173.516 69.119 172.34 73.399 171.753 77.171 171.753 80.438 171.753 83.704 172.225 85.795 173.173 86.709 174.12 87.624 175.279 88.082 176.651 88.082 Z M254.366 88.082 C255.999 88.082 257.617 87.315 259.217 85.78 260.818 84.244 261.913 82.136 262.501 79.457 L267.204 57.311 C267.204 56.462 266.877 55.628 266.223 54.811 265.57 53.994 264.558 53.586 263.186 53.586 260.573 53.586 258.22 55.105 256.13 58.143 254.039 61.181 252.405 64.84 251.229 69.119 250.053 73.399 249.466 77.171 249.466 80.438 249.466 83.704 249.94 85.795 250.887 86.709 251.835 87.624 252.994 88.082 254.366 88.082 Z M367.753 42.707 C365.597 42.707 363.767 41.956 362.264 40.453 360.762 38.951 360.01 37.121 360.01 34.965 360.01 32.809 360.762 30.963 362.264 29.428 363.767 27.893 365.597 27.125 367.753 27.125 369.909 27.125 371.754 27.893 373.29 29.428 374.825 30.963 375.592 32.809 375.592 34.965 375.592 37.121 374.825 38.951 373.29 40.453 371.754 41.956 369.909 42.707 367.753 42.707 Z M89.04 98.764 C84.924 98.764 81.298 98.045 78.162 96.608 75.026 95.171 72.609 93.162 70.91 90.581 69.211 88 68.362 85.011 68.362 81.614 68.362 78.739 68.966 76.126 70.175 73.774 71.384 71.422 73.017 69.56 75.075 68.188 77.133 66.816 79.403 66.13 81.886 66.13 84.173 66.13 86.1 66.702 87.668 67.845 89.236 68.988 90.216 70.573 90.608 72.598 87.211 72.598 84.499 73.496 82.474 75.293 80.449 77.09 79.436 79.523 79.436 82.594 79.436 85.403 80.285 87.657 81.984 89.356 83.683 91.055 85.937 91.904 88.746 91.904 92.209 91.904 95.067 90.744 97.321 88.425 99.575 86.106 100.702 83.182 100.702 79.654 100.702 76.583 99.853 73.676 98.154 70.932 96.455 68.188 93.907 64.856 90.51 60.936 86.982 56.885 84.32 53.406 82.523 50.499 80.726 47.592 79.828 44.407 79.828 40.944 79.828 37.547 80.775 34.492 82.67 31.781 84.565 29.07 87.178 26.93 90.51 25.362 93.842 23.794 97.599 23.01 101.78 23.01 107.072 23.01 111.302 24.251 114.471 26.734 117.64 29.217 119.224 32.549 119.224 36.73 119.224 39.474 118.538 41.695 117.166 43.394 115.794 45.093 113.997 45.942 111.776 45.942 109.293 45.942 107.301 44.929 105.798 42.904 107.039 41.989 108.019 40.781 108.738 39.278 109.457 37.775 109.816 36.207 109.816 34.574 109.816 32.483 109.195 30.817 107.954 29.576 106.713 28.335 105.014 27.714 102.858 27.714 100.245 27.714 98.105 28.645 96.439 30.507 94.773 32.369 93.94 34.737 93.94 37.612 93.94 40.225 94.691 42.659 96.194 44.913 97.697 47.167 100.049 50.058 103.25 53.586 105.863 56.395 107.97 58.813 109.571 60.838 111.172 62.863 112.544 65.199 113.687 67.845 114.83 70.491 115.402 73.349 115.402 76.42 115.402 80.601 114.242 84.391 111.923 87.788 109.604 91.185 106.435 93.864 102.417 95.824 98.399 97.784 93.94 98.764 89.04 98.764 Z" fill-opacity="1" stroke="none"/><path id=":" d="M61.577 57.992 C59.421 57.992 57.592 57.241 56.089 55.738 54.586 54.235 53.835 52.406 53.835 50.25 53.835 48.094 54.586 46.248 56.089 44.713 57.592 43.178 59.421 42.41 61.577 42.41 63.733 42.41 65.579 43.178 67.114 44.713 68.649 46.248 69.417 48.094 69.417 50.25 69.417 52.406 68.649 54.235 67.114 55.738 65.579 57.241 63.733 57.992 61.577 57.992 Z M56.677 81.512 C54.521 81.512 52.692 80.761 51.189 79.258 49.686 77.755 48.935 75.926 48.935 73.77 48.935 71.614 49.686 69.768 51.189 68.233 52.692 66.698 54.521 65.93 56.677 65.93 58.833 65.93 60.679 66.698 62.214 68.233 63.749 69.768 64.517 71.614 64.517 73.77 64.517 75.926 63.749 77.755 62.214 79.258 60.679 80.761 58.833 81.512 56.677 81.512 Z" fill-opacity="1" stroke="none"/> </g><path id="round" d="M57 10 C30.491 10 9 31.491 9 58 L9 64 C9 90.509 30.491 112 57 112 L397 112 C423.509 112 445 90.509 445 64 L445 58 C445 31.491 423.509 10 397 10 Z" fill="none" stroke-width="7" stroke-opacity="1" stroke-linejoin="round" stroke-linecap="round"/> </g> </svg> </a></div><div class="about-site"> Bonjour,<br> Je suis <a class='enhance' href='/jean-jerome-levy/'>Jean-Jérôme Lévy</a>, consultant DevOps indépendant<span class='nonmobile'>, spécialisé en CI/CD, Docker, Kubernetes et Cloud</span>.</div><div class="language-switcher"> <input type="radio" id="toggle-french" name="toggle" value="fr" checked> <label for="toggle-french" aria-label="Le français est sélectionné">Français</label> <input type="radio" id="toggle-english" name="toggle" value="en" onclick="window.location.assign( '/en/hexagonal-architecture-domain/' );"> <label for="toggle-english" aria-label="Select english">English</label></div></div><div class="dark-mode-switcher " id="dark-mode-container"><div class="dark-mode-switch animated light"> <svg class="dark-mode-icon-dark" data-name="Layer 1" fill="#000000" height="20px" viewBox="0 0 64 64" width="20px" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><title>essential</title><path d="M33.28,58.24A26.95,26.95,0,0,1,24,6l.39-.13a2,2,0,0,1,2.4,2.87,22.42,22.42,0,0,0-1.51,18.75h0A22.47,22.47,0,0,0,54.09,40.8l.76-.3a2,2,0,0,1,2.24.48,2,2,0,0,1,.35,2.24,27,27,0,0,1-24.16,15ZM21.11,11.85a22.94,22.94,0,1,0,30,33.91A26.46,26.46,0,0,1,21.53,28.87h0A26.4,26.4,0,0,1,21.11,11.85Z"></path> </svg> <svg class="dark-mode-icon-light" fill="#000000" height="20px" style="enable-background: new 0 0 100 100;" version="1.1" viewBox="0 0 100 100" width="20px" x="0px" xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" y="0px"> <g><path d="M50,75c-13.8,0-25-11.2-25-25s11.2-25,25-25s25,11.2,25,25S63.8,75,50,75z M50,33.3c-9.2,0-16.7,7.5-16.7,16.7 c0,9.2,7.5,16.7,16.7,16.7c9.2,0,16.7-7.5,16.7-16.7C66.7,40.8,59.2,33.3,50,33.3z"></path> </g> <g><path d="M50,100c-2.3,0-4.2-1.9-4.2-4.2v-8.3c0-2.3,1.9-4.2,4.2-4.2c2.3,0,4.2,1.9,4.2,4.2v8.3C54.2,98.1,52.3,100,50,100z M17.5,86.7c-1.1,0-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.3,0-5.9l5.8-5.8c1.6-1.6,4.3-1.6,5.9,0c1.6,1.6,1.6,4.3,0,5.9l-5.8,5.8 C19.6,86.3,18.6,86.7,17.5,86.7z M82.5,86.7c-1.1,0-2.1-0.4-2.9-1.2l-5.8-5.8c-1.6-1.6-1.6-4.3,0-5.9s4.3-1.6,5.9,0l5.8,5.8 c1.6,1.6,1.6,4.3,0,5.9C84.6,86.3,83.6,86.7,82.5,86.7z M95.8,54.2h-8.3c-2.3,0-4.2-1.9-4.2-4.2c0-2.3,1.9-4.2,4.2-4.2h8.3 c2.3,0,4.2,1.9,4.2,4.2C100,52.3,98.1,54.2,95.8,54.2z M12.5,54.2H4.2C1.9,54.2,0,52.3,0,50c0-2.3,1.9-4.2,4.2-4.2h8.3 c2.3,0,4.2,1.9,4.2,4.2C16.7,52.3,14.8,54.2,12.5,54.2z M76.7,27.5c-1.1,0-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.3,0-5.9l5.8-5.8 c1.6-1.6,4.3-1.6,5.9,0c1.6,1.6,1.6,4.3,0,5.9l-5.8,5.8C78.8,27.1,77.7,27.5,76.7,27.5z M23.3,27.5c-1.1,0-2.1-0.4-2.9-1.2 l-5.8-5.8c-1.6-1.6-1.6-4.3,0-5.9c1.6-1.6,4.3-1.6,5.9,0l5.8,5.8c1.6,1.6,1.6,4.3,0,5.9C25.5,27.1,24.4,27.5,23.3,27.5z M50,16.7 c-2.3,0-4.2-1.9-4.2-4.2V4.2C45.8,1.9,47.7,0,50,0c2.3,0,4.2,1.9,4.2,4.2v8.3C54.2,14.8,52.3,16.7,50,16.7z"></path> </g> </svg><div class="ball"></div></div></div></header><footer><section class="contact"> <span class="contact-title"> De plus</span><ul><li class="github"><a href="https://github.com/jeanjerome" aria-label="GitHub de l'auteur" target="_blank" rel="noopener noreferrer nofollow"><span><svg width="17.44" height="18" viewBox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><path xmlns="http://www.w3.org/2000/svg" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a></li><li class="linkedin"><a href="https://www.linkedin.com/in/jean-jerome-levy" aria-label="Profil LinkedIn de l'auteur" rel="noopener noreferrer nofollow" target="_blank"><span><svg width="15.75" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg></span></a></li><li class="email"><a href="mailto:contact@scalastic.io" aria-label="Écrire au webmaster"><span><svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 400V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V400H48z"/></svg></span></a></li><li class="search"><a href="/search/" aria-label="Recherche" rel="search"><span> <svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg></span></a></li></ul></section><div class="contact nonmobile"><ul><li><a href="/legals/" aria-label="Mentions légales"><span><svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504.971 199.362l-22.627-22.627c-9.373-9.373-24.569-9.373-33.941 0l-5.657 5.657L329.608 69.255l5.657-5.657c9.373-9.373 9.373-24.569 0-33.941L312.638 7.029c-9.373-9.373-24.569-9.373-33.941 0L154.246 131.48c-9.373 9.373-9.373 24.569 0 33.941l22.627 22.627c9.373 9.373 24.569 9.373 33.941 0l5.657-5.657 39.598 39.598-81.04 81.04-5.657-5.657c-12.497-12.497-32.758-12.497-45.255 0L9.373 412.118c-12.497 12.497-12.497 32.758 0 45.255l45.255 45.255c12.497 12.497 32.758 12.497 45.255 0l114.745-114.745c12.497-12.497 12.497-32.758 0-45.255l-5.657-5.657 81.04-81.04 39.598 39.598-5.657 5.657c-9.373 9.373-9.373 24.569 0 33.941l22.627 22.627c9.373 9.373 24.569 9.373 33.941 0l124.451-124.451c9.372-9.372 9.372-24.568 0-33.941z"/></svg></span></a></li><li><a href="/sitemap.xml" aria-label="Sitemap"><span><svg width="22.5" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M128 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm-24-80h192v48h48v-48h192v48h48v-57.59c0-21.17-17.23-38.41-38.41-38.41H344v-64h40c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32H256c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h40v64H94.41C73.23 224 56 241.23 56 262.41V320h48v-48zm264 80h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm240 0h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32z"/></svg></span></a></li><li><a href="https://github.com/scalastic/scalastic.github.io" aria-label="GitHub du site Scalastic" target="_blank" rel="noopener noreferrer nofollow"><span><svg width="22.5" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"/></svg></span></a></li></ul></div><div class="copyright"><p>2025 <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" aria-label="CC BY-NC-ND 4.0 Licence" target="_blank" rel="noopener noreferrer nofollow license">CC BY-NC-ND 4.0</a> Jean-Jérôme Lévy pour Scalastic sauf indication contraire</p></div></footer></aside><div class="content-box clearfix"><article class="article-page"><div class="page-content"><div class="page-cover-image"><figure><picture> <source sizes="(max-width : 769px) calc(100vw - 20px), (max-width : 1119px) calc(100vw - 20px), (min-width: 1120px) 970px" media="(max-width : 769px)" srcset="/assets/img/hexagonal-architecture-domain-400-db299fc23.avif 400w, /assets/img/hexagonal-architecture-domain-970-db299fc23.avif 970w, /assets/img/hexagonal-architecture-domain-1493-db299fc23.avif 1493w" type="image/avif"> <source sizes="(max-width : 769px) calc(100vw - 20px), (max-width : 1119px) calc(100vw - 20px), (min-width: 1120px) 970px" media="(max-width : 1119px)" srcset="/assets/img/hexagonal-architecture-domain-400-23f5ad83a.avif 400w, /assets/img/hexagonal-architecture-domain-970-23f5ad83a.avif 970w, /assets/img/hexagonal-architecture-domain-1940-23f5ad83a.avif 1940w" type="image/avif"> <source sizes="(max-width : 769px) calc(100vw - 20px), (max-width : 1119px) calc(100vw - 20px), (min-width: 1120px) 970px" srcset="/assets/img/hexagonal-architecture-domain-400-23f5ad83a.avif 400w, /assets/img/hexagonal-architecture-domain-970-23f5ad83a.avif 970w, /assets/img/hexagonal-architecture-domain-1940-23f5ad83a.avif 1940w" type="image/avif"> <source sizes="(max-width : 769px) calc(100vw - 20px), (max-width : 1119px) calc(100vw - 20px), (min-width: 1120px) 970px" media="(max-width : 769px)" srcset="/assets/img/hexagonal-architecture-domain-400-b60d59c89.webp 400w, /assets/img/hexagonal-architecture-domain-970-b60d59c89.webp 970w, /assets/img/hexagonal-architecture-domain-1493-b60d59c89.webp 1493w" type="image/webp"> <source sizes="(max-width : 769px) calc(100vw - 20px), (max-width : 1119px) calc(100vw - 20px), (min-width: 1120px) 970px" media="(max-width : 1119px)" srcset="/assets/img/hexagonal-architecture-domain-400-0396e70a8.webp 400w, /assets/img/hexagonal-architecture-domain-970-0396e70a8.webp 970w, /assets/img/hexagonal-architecture-domain-1940-0396e70a8.webp 1940w" type="image/webp"> <source sizes="(max-width : 769px) calc(100vw - 20px), (max-width : 1119px) calc(100vw - 20px), (min-width: 1120px) 970px" srcset="/assets/img/hexagonal-architecture-domain-400-0396e70a8.webp 400w, /assets/img/hexagonal-architecture-domain-970-0396e70a8.webp 970w, /assets/img/hexagonal-architecture-domain-1940-0396e70a8.webp 1940w" type="image/webp"> <source sizes="(max-width : 769px) calc(100vw - 20px), (max-width : 1119px) calc(100vw - 20px), (min-width: 1120px) 970px" media="(max-width : 769px)" srcset="/assets/img/hexagonal-architecture-domain-400-263b1d6f0.jpg 400w, /assets/img/hexagonal-architecture-domain-970-263b1d6f0.jpg 970w, /assets/img/hexagonal-architecture-domain-1493-263b1d6f0.jpg 1493w" type="image/jpeg"> <source sizes="(max-width : 769px) calc(100vw - 20px), (max-width : 1119px) calc(100vw - 20px), (min-width: 1120px) 970px" media="(max-width : 1119px)" srcset="/assets/img/hexagonal-architecture-domain-400-289515c7d.jpg 400w, /assets/img/hexagonal-architecture-domain-970-289515c7d.jpg 970w, /assets/img/hexagonal-architecture-domain-1940-289515c7d.jpg 1940w" type="image/jpeg"> <source sizes="(max-width : 769px) calc(100vw - 20px), (max-width : 1119px) calc(100vw - 20px), (min-width: 1120px) 970px" srcset="/assets/img/hexagonal-architecture-domain-400-289515c7d.jpg 400w, /assets/img/hexagonal-architecture-domain-970-289515c7d.jpg 970w, /assets/img/hexagonal-architecture-domain-1940-289515c7d.jpg 1940w" type="image/jpeg"> <img class="page-image" width="1100" height="550" src="/assets/img/hexagonal-architecture-domain-800-289515c7d.jpg" alt="Le Guide Ultime pour Maîtriser l'Architecture Hexagonale : Focus sur le Domaine"> </picture><figcaption>Une sonde hexagonale sur Mars par <a href="#">DALL•E</a></figcaption></figure></div><div class="wrap-content"><header class="page-header"><h1 class="page-title">Le Guide Ultime pour Maîtriser l'Architecture Hexagonale : Focus sur le Domaine</h1><div class="page-metadata"><ul><li><span><svg width="16.625" height="19" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M148 288h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"/></svg></span> 03 Octobre 2024</li><li><span><svg width="19" height="19" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg></span> 41 minutes</li><li><span><svg width="23.75" height="19" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"/></svg></span></li><li><a class="tag" href="/tags#Hexagonal-Architecture" rel="tag">Hexagonal-Architecture</a></li><li><a class="tag" href="/tags#Domain" rel="tag">Domain</a></li><li><a class="tag" href="/tags#Software-Design" rel="tag">Software-Design</a></li><li><a class="tag" href="/tags#Clean-Architecture" rel="tag">Clean-Architecture</a></li><li><a class="tag" href="/tags#Craftsmanship" rel="tag">Craftsmanship</a></li></ul></div></header><p>Bien qu’elle existe depuis de nombreuses années, l’<strong>Architecture Hexagonale</strong> connait un réel essor ces derniers temps. Au cœur de cette architecture se trouve le <strong>Domaine</strong> : il y joue un rôle central en encapsulant la logique métier et en assurant une séparation claire entre les préoccupations fonctionnelles et techniques.</p><p>Cet article a pour objectif de vous guider, pas à pas, dans la mise en place de la partie domaine d’une architecture hexagonale. Nous aborderons des questions essentielles que tout développeur doit se poser pour construire un domaine applicatif solide : <em>Comment structurer les ports inbound et outbound ? Quel est le rôle des services métier et des entités ? Comment gérer les exceptions et les types de retour ? Quelles sont les bonnes pratiques pour la validation des données ou encore à quoi peuvent servir les DTO ?</em></p><p>En explorant ces thématiques, nous présenterons les solutions adéquates et les choix d’implémentation qui vous permettront de construire votre domaine avec les bons outils, tout en respectant l’état de l’art. Ce guide vous apportera les clés pour maîtriser la conception d’un domaine efficace et cohérent au sein de votre application.</p><hr class="hr-text" data-content="Sommaire" /><ul id="markdown-toc"><li><a href="#1-définition-des-ports-inbound-et-outbound" id="markdown-toc-1-définition-des-ports-inbound-et-outbound">1. Définition des Ports Inbound et Outbound</a><ul><li><a href="#ports-inbound-interfaces-applicatives" id="markdown-toc-ports-inbound-interfaces-applicatives">Ports Inbound (Interfaces Applicatives)</a></li><li><a href="#ports-outbound-interfaces-techniques" id="markdown-toc-ports-outbound-interfaces-techniques">Ports Outbound (Interfaces Techniques)</a></li><li><a href="#importance-de-ces-distinctions" id="markdown-toc-importance-de-ces-distinctions">Importance de ces distinctions</a></li><li><a href="#raison-du-choix-de-cette-structure" id="markdown-toc-raison-du-choix-de-cette-structure">Raison du choix de cette structure</a></li></ul></li><li><a href="#2-gestion-des-exceptions-dans-le-domaine" id="markdown-toc-2-gestion-des-exceptions-dans-le-domaine">2. Gestion des Exceptions dans le Domaine</a><ul><li><a href="#le-domaine-et-les-erreurs-métier" id="markdown-toc-le-domaine-et-les-erreurs-métier">Le Domaine et les Erreurs Métier</a></li><li><a href="#le-domaine-peut-il-se-limiter-uniquement-aux-erreurs-métier-" id="markdown-toc-le-domaine-peut-il-se-limiter-uniquement-aux-erreurs-métier-">Le Domaine Peut-il se Limiter Uniquement aux Erreurs Métier ?</a></li><li><a href="#responsabilité-du-domaine-vis-à-vis-des-api-et-des-spi-en-matière-derreurs" id="markdown-toc-responsabilité-du-domaine-vis-à-vis-des-api-et-des-spi-en-matière-derreurs">Responsabilité du Domaine vis-à-vis des API et des SPI en Matière d’Erreurs</a><ul><li><a href="#au-niveau-des-ports-inbound-api" id="markdown-toc-au-niveau-des-ports-inbound-api">Au Niveau des Ports Inbound (API)</a></li><li><a href="#au-niveau-des-ports-outbound-spi" id="markdown-toc-au-niveau-des-ports-outbound-spi">Au Niveau des Ports Outbound (SPI)</a></li></ul></li><li><a href="#en-résumé" id="markdown-toc-en-résumé">En Résumé</a></li></ul></li><li><a href="#3-les-services-métier-dans-larchitecture-hexagonale" id="markdown-toc-3-les-services-métier-dans-larchitecture-hexagonale">3. Les Services Métier dans l’Architecture Hexagonale</a><ul><li><a href="#positionnement-des-services-métier-au-sein-des-api-et-des-spi" id="markdown-toc-positionnement-des-services-métier-au-sein-des-api-et-des-spi">Positionnement des Services Métier au sein des API et des SPI</a></li><li><a href="#ce-que-les-services-métier-peuvent-faire" id="markdown-toc-ce-que-les-services-métier-peuvent-faire">Ce que les Services Métier Peuvent Faire</a></li><li><a href="#ce-que-les-services-métier-ne-doivent-pas-faire" id="markdown-toc-ce-que-les-services-métier-ne-doivent-pas-faire">Ce que les Services Métier Ne Doivent Pas Faire</a></li><li><a href="#avantages-des-services-métier" id="markdown-toc-avantages-des-services-métier">Avantages des Services Métier</a></li></ul></li><li><a href="#4-utilisation-des-entités-métier" id="markdown-toc-4-utilisation-des-entités-métier">4. Utilisation des Entités Métier</a><ul><li><a href="#les-entités-métier" id="markdown-toc-les-entités-métier">Les Entités Métier</a></li><li><a href="#différentes-implémentations-possibles" id="markdown-toc-différentes-implémentations-possibles">Différentes Implémentations Possibles</a><ul><li><a href="#1-java-pojo-plain-old-java-object" id="markdown-toc-1-java-pojo-plain-old-java-object">1. Java POJO (Plain Old Java Object)</a></li><li><a href="#2-records-java" id="markdown-toc-2-records-java">2. Records Java</a></li><li><a href="#3-lombok" id="markdown-toc-3-lombok">3. Lombok</a></li></ul></li><li><a href="#recommandations" id="markdown-toc-recommandations">Recommandations</a></li><li><a href="#validation-des-données-dans-les-entités-métier" id="markdown-toc-validation-des-données-dans-les-entités-métier">Validation des Données dans les Entités Métier</a></li></ul></li><li><a href="#5-choix-des-types-de-retour-des-méthodes" id="markdown-toc-5-choix-des-types-de-retour-des-méthodes">5. Choix des Types de Retour des Méthodes</a><ul><li><a href="#exemples-illustratifs" id="markdown-toc-exemples-illustratifs">Exemples Illustratifs</a></li><li><a href="#avantages-de-cette-approche" id="markdown-toc-avantages-de-cette-approche">Avantages de cette Approche</a></li><li><a href="#bonnes-pratiques" id="markdown-toc-bonnes-pratiques">Bonnes Pratiques</a></li></ul></li><li><a href="#6-validation-des-données" id="markdown-toc-6-validation-des-données">6. Validation des Données</a><ul><li><a href="#adaptateurs-dentrée-rest-ui-etc" id="markdown-toc-adaptateurs-dentrée-rest-ui-etc">Adaptateurs d’Entrée (REST, UI, etc.)</a></li><li><a href="#service-métier-domain" id="markdown-toc-service-métier-domain">Service Métier (domain)</a></li><li><a href="#impacts-pour-les-autres-composants" id="markdown-toc-impacts-pour-les-autres-composants">Impacts pour les Autres Composants</a></li><li><a href="#avantages-et-inconvénients" id="markdown-toc-avantages-et-inconvénients">Avantages et Inconvénients</a></li></ul></li><li><a href="#7-rôle-des-dto-dans-larchitecture-hexagonale" id="markdown-toc-7-rôle-des-dto-dans-larchitecture-hexagonale">7. Rôle des DTO dans l’Architecture Hexagonale</a><ul><li><a href="#pourquoi-utiliser-des-dto-" id="markdown-toc-pourquoi-utiliser-des-dto-">Pourquoi Utiliser des DTO ?</a></li><li><a href="#les-avantages-des-dto" id="markdown-toc-les-avantages-des-dto">Les Avantages des DTO</a></li><li><a href="#les-inconvénients-des-dto" id="markdown-toc-les-inconvénients-des-dto">Les Inconvénients des DTO</a></li><li><a href="#en-résumé-1" id="markdown-toc-en-résumé-1">En Résumé</a></li></ul></li><li><a href="#8-organisation-en-packages-du-domaine" id="markdown-toc-8-organisation-en-packages-du-domaine">8. Organisation en Packages du Domaine</a><ul><li><a href="#un-exemple-de-structure-des-packages-pour-le-cas-dutilisation-user" id="markdown-toc-un-exemple-de-structure-des-packages-pour-le-cas-dutilisation-user">Un Exemple de Structure des Packages pour le cas d’utilisation “user”</a></li><li><a href="#détails-des-classes-et-interfaces" id="markdown-toc-détails-des-classes-et-interfaces">Détails des Classes et Interfaces</a></li></ul></li><li><a href="#conclusion---au-delà-de-lhexagone" id="markdown-toc-conclusion---au-delà-de-lhexagone">Conclusion - Au-delà de l’Hexagone</a></li></ul><hr class="hr-text" data-content="Ports" /><h2 id="1-définition-des-ports-inbound-et-outbound">1. Définition des Ports Inbound et Outbound</h2><p>Dans une architecture hexagonale, les <strong>ports</strong> définissent les points d’interaction entre la logique métier du domaine et les couches externes. Ils sont découpés en deux catégories principales : les <strong>ports inbound</strong> et les <strong>ports outbound</strong>.</p><h3 id="ports-inbound-interfaces-applicatives">Ports Inbound (Interfaces Applicatives)</h3><p>Les <strong>ports inbound</strong>, représentés par des interfaces comme <strong><code class="language-plaintext highlighter-rouge">UserApiPort</code></strong>, exposent les opérations que l’application offre aux couches externes. Ces ports définissent les <strong>cas d’utilisation</strong> ou les <strong>services applicatifs</strong> que le système propose, tels que <code class="language-plaintext highlighter-rouge">createUser</code>, <code class="language-plaintext highlighter-rouge">findUserById</code>, <code class="language-plaintext highlighter-rouge">updateUser</code> et <code class="language-plaintext highlighter-rouge">deleteUser</code>.</p><div class="code-container"><div class="code-window"><div class="window-header"><div class="window-controls"> <svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"> <g fill="none" fill-rule="evenodd" transform="translate(1 1)"> <circle cx="6" cy="6" r="6" fill="#EC6A5E" stroke="#EC6A5E" stroke-width=".5" /> <circle cx="26" cy="6" r="6" fill="#F4BF4F" stroke="#F4BF4F" stroke-width=".5" /> <circle cx="46" cy="6" r="6" fill="#61C554" stroke="#61C554" stroke-width=".5" /> </g> </svg></div><div class="window-copy"> <svg xmlns="http://www.w3.org/2000/svg" class="window-copy-icon" height="24" width="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path> </svg></div></div><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserApiPort</span> <span class="o">{</span>
    <span class="nc">User</span> <span class="nf">createUser</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">);</span>
    <span class="nc">User</span> <span class="nf">findUserById</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">);</span>
    <span class="nc">User</span> <span class="nf">updateUser</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">,</span> <span class="nc">User</span> <span class="n">user</span><span class="o">);</span>
    <span class="kt">void</span> <span class="nf">deleteUser</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><div class="code-label"> Java</div></div></div><ul><li><p><strong>Utilisation des appels aux ports inbound :</strong></p><ul><li>Les ports inbound servent de <strong>contrats applicatifs</strong> entre le domaine et les adaptateurs externes (par exemple, les contrôleurs REST, les interfaces utilisateur).</li><li>Ils permettent aux couches externes d’invoquer des opérations <strong>métier</strong> sans connaître les détails de l’implémentation interne.</li><li>En se concentrant sur les <strong>besoins fonctionnels</strong> de l’application, ils offrent une interface claire pour réaliser les cas d’utilisation définis.</li></ul></li><li><p><strong>Différences de nommage et de responsabilité :</strong></p><ul><li>Les interfaces inbound peuvent être nommées avec le suffixe <strong><code class="language-plaintext highlighter-rouge">ApiPort</code></strong>, reflétant leur rôle d’interface applicative (API) pour les opérations offertes.</li><li>Elles se concentrent sur la <strong>logique fonctionnelle</strong> et les <strong>services</strong> que l’application fournit aux utilisateurs.</li></ul></li><li><p><strong>Gestion des retours et des exceptions :</strong></p><ul><li>Les méthodes des ports inbound renvoient directement les objets métiers, comme <code class="language-plaintext highlighter-rouge">User</code>, ou lèvent des <strong>exceptions métier</strong> en cas de problème (par exemple, <code class="language-plaintext highlighter-rouge">ResourceNotFoundException</code>, <code class="language-plaintext highlighter-rouge">BusinessRuleViolationException</code>).</li><li>Cela permet aux adaptateurs externes de gérer les erreurs de manière appropriée, en fournissant des réponses claires aux clients de l’application.</li></ul></li></ul><div class="premonition info"> <i class="premonition pn-info"></i><div class="content"><p class="header">Note</p><ul><li>La méthode <code class="language-plaintext highlighter-rouge">findUserById(Long id)</code> renvoie un <code class="language-plaintext highlighter-rouge">User</code> ou lève une <code class="language-plaintext highlighter-rouge">ResourceNotFoundException</code> si l’utilisateur n’existe pas.</li><li>La méthode <code class="language-plaintext highlighter-rouge">createUser(User user)</code> lève une <code class="language-plaintext highlighter-rouge">BusinessRuleViolationException</code> si le nom de l’utilisateur est vide ou nul.</li></ul></div></div><p><strong>Avantages :</strong></p><ul><li><strong>Découplage fonctionnel</strong> : Les ports inbound isolent la logique métier des détails techniques des couches externes.</li><li><strong>Clarté des services</strong> : Ils définissent explicitement les opérations disponibles, facilitant la compréhension et l’utilisation de l’application.</li></ul><p><strong>Inconvénients :</strong></p><ul><li><strong>Conception initiale complexe</strong> : Cela nécessite une bonne compréhension des cas d’utilisation pour définir des interfaces pertinentes.</li></ul><h3 id="ports-outbound-interfaces-techniques">Ports Outbound (Interfaces Techniques)</h3><p>Les <strong>ports outbound</strong>, tels que <strong><code class="language-plaintext highlighter-rouge">UserSpiPort</code></strong>, définissent comment le domaine interagit avec les systèmes externes. Ils sont axés sur les aspects <strong>techniques</strong> nécessaires pour réaliser les opérations métier, comme l’accès à la base de données ou à des services externes.</p><div class="code-container"><div class="code-window"><div class="window-header"><div class="window-controls"> <svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"> <g fill="none" fill-rule="evenodd" transform="translate(1 1)"> <circle cx="6" cy="6" r="6" fill="#EC6A5E" stroke="#EC6A5E" stroke-width=".5" /> <circle cx="26" cy="6" r="6" fill="#F4BF4F" stroke="#F4BF4F" stroke-width=".5" /> <circle cx="46" cy="6" r="6" fill="#61C554" stroke="#61C554" stroke-width=".5" /> </g> </svg></div><div class="window-copy"> <svg xmlns="http://www.w3.org/2000/svg" class="window-copy-icon" height="24" width="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path> </svg></div></div><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserSpiPort</span> <span class="o">{</span>
    <span class="nc">User</span> <span class="nf">saveUser</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">);</span>
    <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findUser</span><span class="o">(</span><span class="nc">Long</span> <span class="n">userId</span><span class="o">);</span>
    <span class="nc">User</span> <span class="nf">updateUser</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">);</span>
    <span class="kt">void</span> <span class="nf">deleteUser</span><span class="o">(</span><span class="nc">Long</span> <span class="n">userId</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><div class="code-label"> Java</div></div></div><ul><li><p><strong>Utilisation des appels aux ports outbound :</strong></p><ul><li>Les ports outbound agissent comme des <strong>interfaces techniques</strong> que le domaine utilise pour accomplir ses tâches, sans se soucier des implémentations concrètes.</li><li>Ils permettent de <strong>déléguer</strong> les opérations techniques à des adaptateurs spécialisés, tout en maintenant le domaine indépendant des technologies spécifiques.</li></ul></li><li><p><strong>Différences de nommage et de responsabilité :</strong></p><ul><li>Les interfaces outbound peuvent être nommées avec le suffixe <strong><code class="language-plaintext highlighter-rouge">SpiPort</code></strong>, indiquant leur rôle de <strong>Service Provider Interface</strong> ou SPI.</li><li>Elles se concentrent sur les <strong>détails techniques</strong> nécessaires au domaine pour fonctionner, sans inclure de logique métier.</li></ul></li><li><p><strong>Gestion des retours et des exceptions :</strong></p><ul><li>Les méthodes des ports outbound renvoient souvent des <strong><code class="language-plaintext highlighter-rouge">Optional&lt;User&gt;</code></strong>, reflétant l’incertitude technique quant à l’existence d’une ressource.</li><li>Elles ne lèvent pas d’exceptions métier, laissant au domaine le soin de décider comment gérer les cas où les données ne sont pas disponibles.</li></ul></li></ul><div class="premonition info"> <i class="premonition pn-info"></i><div class="content"><p class="header">Note</p><p>La méthode <code class="language-plaintext highlighter-rouge">findUserById(Long id)</code> renvoie un <code class="language-plaintext highlighter-rouge">Optional&lt;User&gt;</code>, indiquant que l’utilisateur peut être présent ou non dans le système externe.</p></div></div><p><strong>Avantages :</strong></p><ul><li><strong>Flexibilité technique</strong> : Facilite le changement d’implémentation des services techniques sans affecter le domaine.</li><li><strong>Testabilité</strong> : Les ports outbound peuvent être facilement mockés lors des tests unitaires, isolant ainsi la logique métier.</li></ul><p><strong>Inconvénients :</strong></p><ul><li><strong>Nécessité d’une abstraction adéquate</strong> : Les ports doivent être suffisamment génériques pour ne pas introduire de dépendances technologiques dans le domaine.</li></ul><h3 id="importance-de-ces-distinctions">Importance de ces distinctions</h3><ul><li><strong>Gestion cohérente des erreurs</strong> : En séparant les responsabilités, le domaine peut décider comment gérer les cas d’absence de données (lever une exception métier) tandis que les ports outbound gèrent les incertitudes techniques.</li><li><strong>Clarté du code</strong> : Les développeurs peuvent comprendre rapidement le rôle de chaque interface en se basant sur son nom et sa localisation dans le projet.</li><li><strong>Maintenabilité</strong> : Cette organisation facilite les modifications ultérieures, qu’il s’agisse d’ajouter de nouvelles fonctionnalités ou de changer l’implémentation technique.</li></ul><h3 id="raison-du-choix-de-cette-structure">Raison du choix de cette structure</h3><ul><li><strong>Découplage fort</strong> : En distinguant clairement les ports inbound et outbound, l’architecture hexagonale assure un découplage entre la logique fonctionnelle de l’application et les détails techniques d’implémentation.</li><li><strong>Adaptabilité</strong> : Permet de modifier ou remplacer les adaptateurs techniques sans impacter le domaine ou les services applicatifs.</li><li><strong>Cohérence dans la communication</strong> : Les adaptateurs externes interagissent avec le domaine via des interfaces fonctionnelles claires, tandis que le domaine utilise des interfaces techniques bien définies pour accéder aux ressources externes.</li></ul><hr class="hr-text" data-content="Exceptions" /><h2 id="2-gestion-des-exceptions-dans-le-domaine">2. Gestion des Exceptions dans le Domaine</h2><p>Le domaine est censé être indépendant des détails techniques et se concentrer sur la <strong>logique métier</strong>. Cela soulève la question suivante : le domaine doit-il uniquement gérer des <strong>exceptions métier</strong> ou peut-il également être concerné par certaines erreurs techniques ?</p><h3 id="le-domaine-et-les-erreurs-métier">Le Domaine et les Erreurs Métier</h3><p>Le domaine est responsable de la <strong>logique métier</strong> et doit gérer les situations où les règles métier sont violées. Pour cela, des exceptions spécifiques au domaine doivent être définies, telles que :</p><ul><li><strong><code class="language-plaintext highlighter-rouge">ResourceNotFoundException</code></strong> : Levée lorsqu’une ressource demandée (comme un utilisateur) n’existe pas.</li><li><strong><code class="language-plaintext highlighter-rouge">BusinessRuleViolationException</code></strong> : Levée lorsqu’une règle métier est violée, par exemple, lorsqu’un utilisateur tente de s’inscrire avec une adresse e-mail déjà utilisée.</li></ul><div class="code-container"><div class="code-window"><div class="window-header"><div class="window-controls"> <svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"> <g fill="none" fill-rule="evenodd" transform="translate(1 1)"> <circle cx="6" cy="6" r="6" fill="#EC6A5E" stroke="#EC6A5E" stroke-width=".5" /> <circle cx="26" cy="6" r="6" fill="#F4BF4F" stroke="#F4BF4F" stroke-width=".5" /> <circle cx="46" cy="6" r="6" fill="#61C554" stroke="#61C554" stroke-width=".5" /> </g> </svg></div><div class="window-copy"> <svg xmlns="http://www.w3.org/2000/svg" class="window-copy-icon" height="24" width="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path> </svg></div></div><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ResourceNotFoundException</span> <span class="kd">extends</span> <span class="nc">RuntimeException</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">ResourceNotFoundException</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure><div class="code-label"> Java</div></div></div><div class="code-container"><div class="code-window"><div class="window-header"><div class="window-controls"> <svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"> <g fill="none" fill-rule="evenodd" transform="translate(1 1)"> <circle cx="6" cy="6" r="6" fill="#EC6A5E" stroke="#EC6A5E" stroke-width=".5" /> <circle cx="26" cy="6" r="6" fill="#F4BF4F" stroke="#F4BF4F" stroke-width=".5" /> <circle cx="46" cy="6" r="6" fill="#61C554" stroke="#61C554" stroke-width=".5" /> </g> </svg></div><div class="window-copy"> <svg xmlns="http://www.w3.org/2000/svg" class="window-copy-icon" height="24" width="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path> </svg></div></div><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BusinessRuleViolationException</span> <span class="kd">extends</span> <span class="nc">RuntimeException</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">BusinessRuleViolationException</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nf">BusinessRuleViolationException</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">,</span> <span class="nc">Throwable</span> <span class="n">cause</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">message</span><span class="o">,</span> <span class="n">cause</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure><div class="code-label"> Java</div></div></div><p>Ces exceptions permettent au domaine de signaler clairement aux couches appelantes qu’une violation des règles métier a eu lieu, sans exposer les détails techniques internes.</p><div class="premonition info"> <i class="premonition pn-info"></i><div class="content"><p class="header">Note</p><p>L’utilisation de <code class="language-plaintext highlighter-rouge">RuntimeException</code> (unchecked exceptions) simplifie le code en évitant la déclaration explicite des exceptions tout en permettant leur propagation automatique jusqu’aux adaptateurs pour une gestion centralisée des erreurs métier.</p></div></div><h3 id="le-domaine-peut-il-se-limiter-uniquement-aux-erreurs-métier-">Le Domaine Peut-il se Limiter Uniquement aux Erreurs Métier ?</h3><p>Idéalement, le domaine devrait se concentrer exclusivement sur les <strong>erreurs métier</strong>. Les erreurs techniques, telles que les exceptions liées à la base de données, aux réseaux ou aux entrées/sorties, devraient être gérées par les adaptateurs techniques (implémentations des ports SPI). Cependant, dans la pratique, certaines erreurs techniques peuvent avoir un impact sur la logique métier et ne peuvent pas être totalement ignorées par le domaine.</p><ul><li><p><strong>Exemples de cas où le domaine doit considérer des erreurs techniques :</strong></p><ul><li><strong>Indisponibilité d’un service externe essentiel</strong> : Si une opération métier dépend d’un service externe (comme un système de paiement) et que celui-ci est indisponible, le domaine doit décider comment réagir, par exemple en annulant la transaction et en informant l’utilisateur.</li><li><strong>Violations de contraintes techniques reflétant des règles métier</strong> : Par exemple, une violation de contrainte d’unicité en base de données peut refléter une règle métier d’unicité qui n’a pas été respectée en amont.</li></ul></li></ul><h3 id="responsabilité-du-domaine-vis-à-vis-des-api-et-des-spi-en-matière-derreurs">Responsabilité du Domaine vis-à-vis des API et des SPI en Matière d’Erreurs</h3><h4 id="au-niveau-des-ports-inbound-api">Au Niveau des Ports Inbound (API)</h4><p>Les ports inbound, tels que <strong><code class="language-plaintext highlighter-rouge">UserApiPort</code></strong>, définissent les <strong>cas d’utilisation</strong> que le domaine expose aux adaptateurs externes (comme des contrôleurs REST).</p><ul><li><p><strong>Responsabilités du domaine :</strong></p><ul><li><strong>Lever des exceptions métier</strong> : Lorsque des règles métier sont violées, le domaine lève des exceptions spécifiques comme <code class="language-plaintext highlighter-rouge">BusinessRuleViolationException</code> ou <code class="language-plaintext highlighter-rouge">ResourceNotFoundException</code>.</li><li><strong>Fournir des retours clairs</strong> : Les méthodes du port API renvoient des objets métier ou lèvent des exceptions métier, ce qui permet aux adaptateurs externes de gérer les erreurs de manière appropriée.</li></ul></li></ul><div class="premonition info"> <i class="premonition pn-info"></i><div class="content"><p class="header">Note</p><p>Le domaine ne doit <strong>pas</strong> propager d’exceptions techniques via les ports inbound mais il peut lever des exceptions métier (comme ResourceNotFoundException, BusinessRuleViolationException). Les adaptateurs externes capturent ces exceptions métier et les traduisent en réponses appropriées pour les clients (par exemple, des codes HTTP comme <code class="language-plaintext highlighter-rouge">404 Not Found</code> ou <code class="language-plaintext highlighter-rouge">409 Conflict</code> dans le cas d’une API REST).</p></div></div><h4 id="au-niveau-des-ports-outbound-spi">Au Niveau des Ports Outbound (SPI)</h4><p>Les ports outbound, comme <strong><code class="language-plaintext highlighter-rouge">UserSpiPort</code></strong>, définissent comment le domaine interagit avec les systèmes externes (par exemple, une base de données).</p><ul><li><p><strong>Responsabilités du domaine :</strong></p><ul><li><strong>Gérer les incertitudes techniques</strong> : Les méthodes du port SPI peuvent renvoyer des <code class="language-plaintext highlighter-rouge">Optional&lt;User&gt;</code> pour signaler que l’utilisateur peut ne pas exister, sans lever d’exceptions techniques.</li><li><strong>Ne pas gérer les exceptions techniques</strong> : Les adaptateurs qui implémentent le SPI doivent capturer les exceptions techniques (comme une <code class="language-plaintext highlighter-rouge">SQLException</code> ou encore une <code class="language-plaintext highlighter-rouge">ConstraintViolationException</code>) et les transformer en résultats que le domaine peut comprendre (par exemple, un <code class="language-plaintext highlighter-rouge">Optional.empty()</code>).</li></ul></li></ul><div class="premonition info"> <i class="premonition pn-info"></i><div class="content"><p class="header">Note</p><p>Le domaine doit être protégé des exceptions techniques provenant des adaptateurs SPI pour maintenir son indépendance vis-à-vis des détails techniques.</p></div></div><h3 id="en-résumé">En Résumé</h3><ul><li><p><strong>Le domaine</strong> :</p><ul><li>Gère les <strong>erreurs métier</strong> en levant des exceptions spécifiques.</li><li>Doit être informé des erreurs techniques critiques impactant le métier, mais sans gérer les détails techniques.</li><li>Ne propage pas d’exceptions techniques vers les adaptateurs externes.</li></ul></li><li><p><strong>Les adaptateurs techniques (SPI)</strong> :</p><ul><li>Capturent les <strong>erreurs techniques</strong> et les transforment en résultats que le domaine peut comprendre (par exemple, <code class="language-plaintext highlighter-rouge">Optional.empty()</code>).</li><li>Ne propagent pas les exceptions techniques au domaine.</li></ul></li><li><p><strong>Les adaptateurs externes (API)</strong> :</p><ul><li>Reçoivent les exceptions métier du domaine et les transforment en réponses appropriées pour les clients (par exemple, des codes d’erreur HTTP).</li></ul></li></ul><p>En respectant ces principes, la gestion des erreurs dans le domaine reste cohérente avec les objectifs de l’architecture hexagonale : maintenir une séparation claire entre la logique métier et les détails techniques, tout en assurant une robustesse et une résilience de l’application face aux diverses erreurs qui peuvent survenir.</p><hr class="hr-text" data-content="Services Métier" /><h2 id="3-les-services-métier-dans-larchitecture-hexagonale">3. Les Services Métier dans l’Architecture Hexagonale</h2><p>Dans l’architecture hexagonale, les <strong>services métier</strong> encapsulent la <strong>logique métier</strong> de l’application. Ils orchestrent les opérations nécessaires pour réaliser les cas d’utilisation définis, en s’appuyant sur les ports et les adaptateurs pour interagir avec les systèmes externes et les couches d’infrastructure.</p><h3 id="positionnement-des-services-métier-au-sein-des-api-et-des-spi">Positionnement des Services Métier au sein des API et des SPI</h3><div class="code-container"><div class="code-window"><div class="window-header"><div class="window-controls"> <svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"> <g fill="none" fill-rule="evenodd" transform="translate(1 1)"> <circle cx="6" cy="6" r="6" fill="#EC6A5E" stroke="#EC6A5E" stroke-width=".5" /> <circle cx="26" cy="6" r="6" fill="#F4BF4F" stroke="#F4BF4F" stroke-width=".5" /> <circle cx="46" cy="6" r="6" fill="#61C554" stroke="#61C554" stroke-width=".5" /> </g> </svg></div><div class="window-copy"> <svg xmlns="http://www.w3.org/2000/svg" class="window-copy-icon" height="24" width="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path> </svg></div></div><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserApiService</span> <span class="kd">implements</span> <span class="nc">UserApiPort</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">UserSpiPort</span> <span class="n">userSpiPort</span><span class="o">;</span>
<span class="o">...</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">User</span> <span class="nf">addUser</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userSpiPort</span><span class="o">.</span><span class="na">saveUser</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">User</span> <span class="nf">getUser</span><span class="o">(</span><span class="nc">Long</span> <span class="n">userId</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userSpiPort</span><span class="o">.</span><span class="na">findUser</span><span class="o">(</span><span class="n">userId</span><span class="o">)</span>
                <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">ResourceNotFoundException</span><span class="o">(</span><span class="s">"User not found: "</span> <span class="o">+</span> <span class="n">userId</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">...</span>
<span class="o">}</span></code></pre></figure><div class="code-label"> Java</div></div></div><p>Les services métier se situent <strong>au cœur du domaine</strong> et interagissent avec les ports inbound (API) et outbound (SPI) :</p><ul><li><p><strong>Ports Inbound (API)</strong> : Les services métier <strong>implémentent</strong> les interfaces définies par les ports API. Ces interfaces représentent les <strong>cas d’utilisation</strong> que l’application expose aux adaptateurs externes (par exemple, aux contrôleurs REST).</p><ul><li><em>Exemple</em> : Le service <code class="language-plaintext highlighter-rouge">UserApiService</code> implémente l’interface <code class="language-plaintext highlighter-rouge">UserApiPort</code>, qui définit les opérations telles que <code class="language-plaintext highlighter-rouge">createUser</code>, <code class="language-plaintext highlighter-rouge">findUserById</code>, <code class="language-plaintext highlighter-rouge">updateUser</code> et <code class="language-plaintext highlighter-rouge">deleteUser</code>.</li></ul></li><li><p><strong>Ports Outbound (SPI)</strong> : Les services métier <strong>utilisent</strong> les interfaces définies par les ports SPI pour interagir avec les systèmes externes (comme la persistance des données). Ils délèguent les opérations techniques aux adaptateurs qui implémentent ces ports.</p><ul><li><em>Exemple</em> : <code class="language-plaintext highlighter-rouge">UserApiService</code> utilise <code class="language-plaintext highlighter-rouge">UserSpiPort</code> pour accéder aux méthodes <code class="language-plaintext highlighter-rouge">saveUser</code>, <code class="language-plaintext highlighter-rouge">findUserById</code>, etc., sans se soucier de savoir où et comment ces données seront sauvegardées.</li></ul></li></ul><h3 id="ce-que-les-services-métier-peuvent-faire">Ce que les Services Métier Peuvent Faire</h3><ul><li><p><strong>Encapsuler la Logique Métier</strong> : Ils sont responsables de la mise en œuvre des règles métier, des validations spécifiques et de l’orchestration des opérations nécessaires pour réaliser un cas d’utilisation.</p><ul><li><em>Exemple</em> : Vérifier qu’un utilisateur n’existe pas déjà avant de le créer, ou que les données fournies respectent les contraintes métier.</li></ul></li><li><p><strong>Lever des Exceptions Métier</strong> : En cas de violation des règles métier, les services peuvent lever des exceptions spécifiques pour signaler le problème aux couches supérieures.</p><ul><li><em>Exemple</em> : Lever une <code class="language-plaintext highlighter-rouge">BusinessRuleViolationException</code> si une adresse e-mail est déjà utilisée.</li></ul></li><li><p><strong>Utiliser les Ports SPI</strong> : Ils délèguent les opérations techniques aux adaptateurs via les ports SPI, assurant ainsi le <strong>découplage</strong> entre la logique métier et les détails techniques.</p><ul><li><em>Exemple</em> : Appeler <code class="language-plaintext highlighter-rouge">userSpiPort.saveUser(user)</code> pour persister un utilisateur sans connaître les détails de la base de données.</li></ul></li></ul><h3 id="ce-que-les-services-métier-ne-doivent-pas-faire">Ce que les Services Métier Ne Doivent Pas Faire</h3><ul><li><p><strong>Gérer les Détails Techniques</strong> : Ils ne doivent pas inclure de logique liée aux technologies spécifiques, telles que les interactions directes avec la base de données, les protocoles réseau ou les frameworks externes.</p><ul><li><em>Explication</em> : Cela violerait le principe de séparation des préoccupations et rendrait le domaine dépendant des détails techniques.</li></ul></li><li><p><strong>Manipuler les Objets Techniques</strong> : Les services métier ne doivent pas manipuler directement des objets techniques (par exemple, des entités JPA, des DTOs spécifiques aux frameworks).</p><ul><li><em>Explication</em> : Ils doivent travailler avec des objets métier purs pour maintenir l’indépendance du domaine.</li></ul></li><li><p><strong>Gérer les Exceptions Techniques</strong> : Ils ne doivent pas traiter les exceptions liées aux couches techniques (comme les <code class="language-plaintext highlighter-rouge">SQLException</code>). Ces exceptions doivent être capturées et gérées par les adaptateurs techniques.</p><ul><li><em>Explication</em> : Le domaine doit rester agnostique des détails techniques pour assurer sa portabilité et sa testabilité.</li></ul></li></ul><h3 id="avantages-des-services-métier">Avantages des Services Métier</h3><ul><li><p><strong>Centralisation de la Logique Métier</strong> : En regroupant les règles et les processus métier au sein des services, on facilite la maintenance et l’évolution du système.</p></li><li><p><strong>Découplage des Couches</strong> : Les services métier interagissent avec les ports, assurant ainsi une séparation nette entre le domaine et les couches techniques.</p></li><li><p><strong>Testabilité Améliorée</strong> : En isolant la logique métier, les services peuvent être testés indépendamment des infrastructures externes.</p></li></ul><p>En suivant ces directives, les services métier contribuent à une architecture claire, modulaire et respectueuse des principes du <strong>DevOps</strong> et du <strong>craftsmanship</strong>.</p><hr class="hr-text" data-content="Modèle Métier" /><h2 id="4-utilisation-des-entités-métier">4. Utilisation des Entités Métier</h2><p>Dans le cadre de l’architecture hexagonale, les <strong>entités métier</strong> représentent les objets principaux du domaine, en encapsulant à la fois l’état et le comportement associés. Elles sont au cœur de la logique métier et doivent être conçues de manière à assurer la cohérence, la maintenabilité et l’indépendance vis-à-vis des couches techniques.</p><h3 id="les-entités-métier">Les Entités Métier</h3><p>Les entités métier sont des objets qui modélisent les éléments clés du domaine applicatif, tels que les <code class="language-plaintext highlighter-rouge">User</code>s, les commandes ou les produits. Elles contiennent les données essentielles et les méthodes qui permettent de manipuler ces données selon les règles métier définies.</p><div class="code-container"><div class="code-window"><div class="window-header"><div class="window-controls"> <svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"> <g fill="none" fill-rule="evenodd" transform="translate(1 1)"> <circle cx="6" cy="6" r="6" fill="#EC6A5E" stroke="#EC6A5E" stroke-width=".5" /> <circle cx="26" cy="6" r="6" fill="#F4BF4F" stroke="#F4BF4F" stroke-width=".5" /> <circle cx="46" cy="6" r="6" fill="#61C554" stroke="#61C554" stroke-width=".5" /> </g> </svg></div><div class="window-copy"> <svg xmlns="http://www.w3.org/2000/svg" class="window-copy-icon" height="24" width="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path> </svg></div></div><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">active</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">validateName</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="n">validateEmail</span><span class="o">(</span><span class="n">email</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">active</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// Méthodes métier</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">activateAccount</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">active</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">changeEmail</span><span class="o">(</span><span class="nc">String</span> <span class="n">newEmail</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">validateEmail</span><span class="o">(</span><span class="n">newEmail</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">newEmail</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// Validations internes</span>
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">validateName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">name</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">name</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BusinessRuleViolationException</span><span class="o">(</span><span class="s">"Name cannot be null or empty."</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">validateEmail</span><span class="o">(</span><span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">email</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="o">!</span><span class="n">email</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"@"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BusinessRuleViolationException</span><span class="o">(</span><span class="s">"Invalid email address."</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// Getters et setters</span>
    <span class="c1">// ...</span>
<span class="o">}</span></code></pre></figure><div class="code-label"> Java</div></div></div><ul><li><p><strong>Principales caractéristiques des entités métier :</strong></p><ul><li><strong>Encapsulation de l’état et du comportement</strong> : Les entités regroupent les attributs (données) et les méthodes (comportements) qui leur sont propres.</li><li><strong>Indépendance technologique</strong> : Elles ne dépendent pas des frameworks, bibliothèques ou technologies spécifiques, ce qui permet de maintenir le domaine indépendant des couches externes.</li><li><strong>Cohérence des règles métier</strong> : Elles assurent le respect des contraintes et des invariants du domaine.</li></ul></li></ul><h3 id="différentes-implémentations-possibles">Différentes Implémentations Possibles</h3><p>Plusieurs approches peuvent être adoptées pour implémenter les entités métier en Java :</p><h4 id="1-java-pojo-plain-old-java-object">1. Java POJO (Plain Old Java Object)</h4><p>Les POJOs sont des classes Java classiques sans dépendances particulières à des frameworks. Ils contiennent des attributs privés et des méthodes publiques pour accéder et modifier ces attributs.</p><ul><li><p><strong>Avantages :</strong></p><ul><li><strong>Simplicité et clarté</strong> : Faciles à comprendre et à maintenir.</li><li><strong>Contrôle total</strong> : Permettent une personnalisation complète du comportement.</li></ul></li><li><p><strong>Inconvénients :</strong></p><ul><li><strong>Verbosity</strong> : Nécessitent l’écriture manuelle de code répétitif (constructeurs, getters, setters).</li></ul></li></ul><h4 id="2-records-java">2. Records Java</h4><p>Introduits en Java 14, les <strong>records</strong> sont des classes immuables concises destinées à contenir des données.</p><div class="code-container"><div class="code-window"><div class="window-header"><div class="window-controls"> <svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"> <g fill="none" fill-rule="evenodd" transform="translate(1 1)"> <circle cx="6" cy="6" r="6" fill="#EC6A5E" stroke="#EC6A5E" stroke-width=".5" /> <circle cx="26" cy="6" r="6" fill="#F4BF4F" stroke="#F4BF4F" stroke-width=".5" /> <circle cx="46" cy="6" r="6" fill="#61C554" stroke="#61C554" stroke-width=".5" /> </g> </svg></div><div class="window-copy"> <svg xmlns="http://www.w3.org/2000/svg" class="window-copy-icon" height="24" width="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path> </svg></div></div><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="n">record</span> <span class="nf">User</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">email</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">active</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">User</span> <span class="o">{</span>
        <span class="n">validateName</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="n">validateEmail</span><span class="o">(</span><span class="n">email</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// Méthodes métier renvoyant de nouveaux objets en raison de l'immutabilité</span>
    <span class="kd">public</span> <span class="nc">User</span> <span class="nf">activateAccount</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">User</span><span class="o">(</span><span class="n">id</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">email</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">User</span> <span class="nf">changeEmail</span><span class="o">(</span><span class="nc">String</span> <span class="n">newEmail</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">validateEmail</span><span class="o">(</span><span class="n">newEmail</span><span class="o">);</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">User</span><span class="o">(</span><span class="n">id</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">newEmail</span><span class="o">,</span> <span class="n">active</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// Validations internes</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">validateName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">name</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">name</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BusinessRuleViolationException</span><span class="o">(</span><span class="s">"Name cannot be null or empty."</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">validateEmail</span><span class="o">(</span><span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">email</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="o">!</span><span class="n">email</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"@"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BusinessRuleViolationException</span><span class="o">(</span><span class="s">"Invalid email address."</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure><div class="code-label"> Java</div></div></div><ul><li><p><strong>Avantages :</strong></p><ul><li><strong>Concision</strong> : Réduisent le code boilerplate.</li><li><strong>Immutabilité</strong> : Favorisent la sécurité et la cohérence des données.</li></ul></li><li><p><strong>Inconvénients :</strong></p><ul><li><strong>Limitation des mutations</strong> : Chaque modification crée une nouvelle instance, ce qui peut être moins performant.</li><li><strong>Disponibilité</strong> : Nécessitent Java 14 ou supérieur.</li></ul></li></ul><h4 id="3-lombok">3. Lombok</h4><p><strong>Lombok</strong> est une bibliothèque qui génère automatiquement du code répétitif grâce à des annotations.</p><div class="code-container"><div class="code-window"><div class="window-header"><div class="window-controls"> <svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"> <g fill="none" fill-rule="evenodd" transform="translate(1 1)"> <circle cx="6" cy="6" r="6" fill="#EC6A5E" stroke="#EC6A5E" stroke-width=".5" /> <circle cx="26" cy="6" r="6" fill="#F4BF4F" stroke="#F4BF4F" stroke-width=".5" /> <circle cx="46" cy="6" r="6" fill="#61C554" stroke="#61C554" stroke-width=".5" /> </g> </svg></div><div class="window-copy"> <svg xmlns="http://www.w3.org/2000/svg" class="window-copy-icon" height="24" width="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path> </svg></div></div><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Data</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">active</span><span class="o">;</span>

    <span class="c1">// Méthodes métier</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">activateAccount</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">active</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">changeEmail</span><span class="o">(</span><span class="nc">String</span> <span class="n">newEmail</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">newEmail</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="o">!</span><span class="n">newEmail</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"@"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BusinessRuleViolationException</span><span class="o">(</span><span class="s">"Invalid email address."</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">newEmail</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure><div class="code-label"> Java</div></div></div><ul><li><p><strong>Avantages :</strong></p><ul><li><strong>Réduction du code répétitif</strong> : Génère automatiquement les getters, setters, constructeurs, etc.</li><li><strong>Lisibilité améliorée</strong> : Code source plus concis.</li></ul></li><li><p><strong>Inconvénients :</strong></p><ul><li><strong>Dépendance externe</strong> : Introduit une dépendance supplémentaire.</li><li><strong>Magie cachée</strong> : Le code généré n’est pas visible, ce qui peut compliquer le débogage.</li></ul></li></ul><h3 id="recommandations">Recommandations</h3><p>Après avoir évalué les différentes options, voici des préconisations claires :</p><ol><li><p><strong>Favoriser les POJOs pour un Contrôle Complet</strong></p><ul><li><strong>Pourquoi</strong> : Ils offrent une grande flexibilité et indépendance vis-à-vis des versions de Java ou des dépendances externes.</li><li><strong>Bonnes pratiques</strong> :<ul><li>Utiliser des attributs privés avec des méthodes publiques pour l’accès.</li><li>Inclure des validations dans les constructeurs et les setters.</li><li>Éviter de trop exposer l’état interne (principe d’encapsulation).</li></ul></li></ul></li><li><p><strong>Utiliser les Records pour les Entités Immuables</strong></p><ul><li><strong>Pourquoi</strong> : Si l’entité métier est naturellement immuable, les records offrent une syntaxe concise et sûre.</li><li><strong>Bonnes pratiques</strong> :<ul><li>Inclure des validations dans le constructeur compact.</li><li>Gérer les mutations en retournant de nouvelles instances.</li></ul></li></ul></li><li><p><strong>Utiliser Lombok avec Précaution</strong></p><ul><li><strong>Pourquoi</strong> : Lombok peut accélérer le développement, mais peut introduire de la complexité.</li><li><strong>Bonnes pratiques</strong> :<ul><li>S’assurer que l’équipe est à l’aise avec Lombok.</li><li>Documenter clairement l’utilisation des annotations.</li><li>Limiter Lombok aux cas où le gain est significatif.</li></ul></li></ul></li></ol><h3 id="validation-des-données-dans-les-entités-métier">Validation des Données dans les Entités Métier</h3><p>La validation des données est essentielle pour maintenir l’intégrité du domaine.</p><ul><li><p><strong>Mise en place de la validation :</strong></p><ul><li><strong>Dans les constructeurs et méthodes</strong> : Intégrer des validations pour chaque attribut lors de la création ou de la modification.</li><li><strong>Lever des exceptions métier</strong> : Utiliser des exceptions spécifiques pour signaler les violations des règles métier.</li></ul></li></ul><div class="code-container"><div class="code-window"><div class="window-header"><div class="window-controls"> <svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"> <g fill="none" fill-rule="evenodd" transform="translate(1 1)"> <circle cx="6" cy="6" r="6" fill="#EC6A5E" stroke="#EC6A5E" stroke-width=".5" /> <circle cx="26" cy="6" r="6" fill="#F4BF4F" stroke="#F4BF4F" stroke-width=".5" /> <circle cx="46" cy="6" r="6" fill="#61C554" stroke="#61C554" stroke-width=".5" /> </g> </svg></div><div class="window-copy"> <svg xmlns="http://www.w3.org/2000/svg" class="window-copy-icon" height="24" width="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path> </svg></div></div><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="c1">// Attributs privés</span>

    <span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">validateName</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="n">validateEmail</span><span class="o">(</span><span class="n">email</span><span class="o">);</span>
        <span class="c1">// Initialisation des attributs</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">changeEmail</span><span class="o">(</span><span class="nc">String</span> <span class="n">newEmail</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">validateEmail</span><span class="o">(</span><span class="n">newEmail</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">newEmail</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">validateName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">name</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">name</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BusinessRuleViolationException</span><span class="o">(</span><span class="s">"Name cannot be null or empty."</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">validateEmail</span><span class="o">(</span><span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">email</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="o">!</span><span class="n">email</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"@"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BusinessRuleViolationException</span><span class="o">(</span><span class="s">"Invalid email address."</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// Autres méthodes et getters/setters</span>
<span class="o">}</span></code></pre></figure><div class="code-label"> Java</div></div></div><hr class="hr-text" data-content="Types de Retour" /><h2 id="5-choix-des-types-de-retour-des-méthodes">5. Choix des Types de Retour des Méthodes</h2><p>Dans une architecture hexagonale, le choix des types de retour pour les méthodes du domaine, du SPI et de l’API est d’une importance capitale. Ce choix influence directement les capacités et le rôle de chaque composant, et il doit être effectué avec soin pour maintenir une séparation claire entre la logique métier, les détails techniques et la communication avec les clients externes.</p><p>Les types de retour des méthodes agissent comme des points d’interface entre le domaine, le SPI et l’API. En définissant judicieusement ces types, on s’assure que chaque couche remplit sa fonction spécifique sans empiéter sur les responsabilités des autres. Ainsi :</p><ul><li>Le <strong>domaine</strong> peut se concentrer sur la logique métier, en retournant des <strong>objets métier</strong> clairs ou en levant des <strong>exceptions métier</strong> appropriées.</li><li>Le <strong>SPI</strong> gère les détails techniques et les incertitudes des systèmes externes, en utilisant des types de retour techniques comme <code class="language-plaintext highlighter-rouge">Optional</code> ou des <strong>codes d’erreur</strong>.</li><li>L’<strong>API</strong> interagit avec les clients externes, en traduisant les résultats du domaine en réponses adaptées et en respectant les <strong>protocoles de communication</strong> standard.</li></ul><div class="premonition info"> <i class="premonition pn-info"></i><div class="content"><p class="header">Note</p><p>Introduit en Java 8, <code class="language-plaintext highlighter-rouge">Optional</code> est une classe conteneur qui peut ou non contenir une valeur non nulle. Elle est utilisée pour représenter explicitement l’absence possible d’une valeur, évitant ainsi les problèmes liés aux <code class="language-plaintext highlighter-rouge">NullPointerException</code>.</p></div></div><h3 id="exemples-illustratifs">Exemples Illustratifs</h3><p>Pour mieux comprendre comment cette séparation fonctionne en pratique, voici quelques scénarios concrets présentant les interactions entre le SPI, le domaine et l’API.</p><table><thead><tr><th><strong>Scénario</strong></th><th><strong>SPI</strong></th><th><strong>Domaine</strong></th><th><strong>API</strong> (ex. REST)</th></tr></thead><tbody><tr><td><strong>1. Recherche d’un utilisateur inexistant</strong></td><td>Renvoie <code class="language-plaintext highlighter-rouge">Optional.empty()</code></td><td>Lève une exception métier <code class="language-plaintext highlighter-rouge">ResourceNotFoundException</code>.</td><td>Capture l’exception et renvoie une réponse HTTP <strong>404 Not Found</strong> au client.</td></tr><tr><td><strong>2. Création d’un utilisateur déjà existant</strong></td><td>Capture l’exception technique de contrainte d’unicité.</td><td>Avant de sauvegarder, le domaine vérifie si l’utilisateur existe déjà. S’il existe, il lève une <code class="language-plaintext highlighter-rouge">BusinessRuleViolationException</code>.</td><td>Capture l’exception et renvoie une réponse HTTP <strong>409 Conflict</strong> au client.</td></tr><tr><td><strong>3. Mise à jour d’une ressource inexistante</strong></td><td>Renvoie un booléen indiquant si la mise à jour a réussi.</td><td>Si la mise à jour a échoué (retour <code class="language-plaintext highlighter-rouge">false</code>), le domaine lève une <code class="language-plaintext highlighter-rouge">ResourceNotFoundException</code>.</td><td>Capture l’exception et renvoie une réponse HTTP <strong>404 Not Found</strong> au client.</td></tr><tr><td><strong>4. Erreur de connexion à la base de données</strong></td><td>Capture l’exception technique <code class="language-plaintext highlighter-rouge">DatabaseConnectionException</code>.</td><td>Peut lever une <code class="language-plaintext highlighter-rouge">ServiceUnavailableException</code> ou gérer l’erreur selon les règles métier.</td><td>Capture l’exception et renvoie une réponse HTTP <strong>503 Service Unavailable</strong> au client.</td></tr><tr><td><strong>5. Liste de ressources vide lors de la récupération des utilisateurs</strong></td><td>Renvoie une liste, pouvant être vide.</td><td>La liste vide est considérée comme une réponse valide et la retourne telle quelle.</td><td>Renvoie une réponse HTTP <strong>200 OK</strong> avec une liste vide au client.</td></tr></tbody></table><h3 id="avantages-de-cette-approche">Avantages de cette Approche</h3><ul><li><strong>Découplage des Couches</strong> : Chaque couche a une responsabilité bien définie, ce qui facilite la maintenance et l’évolutivité.</li><li><strong>Clarté dans la Gestion des Erreurs</strong> : Les erreurs techniques ne traversent pas les couches, et les clients reçoivent des messages cohérents.</li><li><strong>Flexibilité</strong> : Permet de changer l’implémentation technique du SPI sans impacter le domaine ou l’API.</li></ul><h3 id="bonnes-pratiques">Bonnes Pratiques</h3><ul><li><strong>Ne pas Exposer les Types Techniques du SPI au Domaine</strong> : Le domaine doit travailler avec des objets métier et ne pas dépendre des types techniques spécifiques.</li><li><strong>Utiliser des Exceptions Métier dans le Domaine</strong> : Pour signaler des problèmes liés aux règles métier.</li><li><strong>Traduire les Exceptions Métier en Codes HTTP Appropriés</strong> : L’API doit mapper les exceptions aux codes HTTP standard pour une communication claire avec le client.</li><li><strong>Gérer les Exceptions Techniques dans le SPI</strong> : Le SPI doit capturer les exceptions techniques et fournir des retours que le domaine peut interpréter.</li></ul><hr class="hr-text" data-content="Validation" /><h2 id="6-validation-des-données">6. Validation des Données</h2><p>Dans une architecture hexagonale, la validation des données peut être effectuée à plusieurs niveaux, mais le <strong>service métier</strong> est le principal responsable des <strong>validations métier</strong>. Cependant, les <strong>adaptateurs d’entrée</strong> (par exemple, les contrôleurs REST ou les services d’application) peuvent également jouer un rôle en validant la <strong>syntaxe e t la structure des données</strong> avant qu’elles ne soient transmises au domaine.</p><p>Voici la répartition des responsabilités.</p><h4 id="adaptateurs-dentrée-rest-ui-etc">Adaptateurs d’Entrée (REST, UI, etc.)</h4><p>Ils peuvent vérifier que les données reçues respectent la <strong>syntaxe</strong> et le <strong>format attendu</strong> (par exemple, des champs obligatoires, des formats de date valides, etc.).</p><p>Ces adaptateurs peuvent utiliser des bibliothèques de validation comme <strong>Hibernate Validator</strong> (qui suit le standard <strong>Bean Validation</strong>), pour valider les <strong>DTOs</strong> avant qu’ils ne soient passés au domaine.</p><p>Cela permet de <strong>filtrer</strong> les erreurs avant que les données ne parviennent au service métier, réduisant ainsi la complexité de gestion des erreurs dans le domaine.</p><div class="code-container"><div class="code-window"><div class="window-header"><div class="window-controls"> <svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"> <g fill="none" fill-rule="evenodd" transform="translate(1 1)"> <circle cx="6" cy="6" r="6" fill="#EC6A5E" stroke="#EC6A5E" stroke-width=".5" /> <circle cx="26" cy="6" r="6" fill="#F4BF4F" stroke="#F4BF4F" stroke-width=".5" /> <circle cx="46" cy="6" r="6" fill="#61C554" stroke="#61C554" stroke-width=".5" /> </g> </svg></div><div class="window-copy"> <svg xmlns="http://www.w3.org/2000/svg" class="window-copy-icon" height="24" width="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path> </svg></div></div><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/users"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">UserDto</span><span class="o">&gt;</span> <span class="nf">createUser</span><span class="o">(</span><span class="nd">@Valid</span> <span class="nd">@RequestBody</span> <span class="nc">UserDto</span> <span class="n">userDto</span><span class="o">)</span> <span class="o">{</span>
   <span class="c1">// If validation fails, a 400 Bad Request will be returned automatically</span>
   <span class="nc">User</span> <span class="n">createdUser</span> <span class="o">=</span> <span class="n">userService</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="n">userDtoMapper</span><span class="o">.</span><span class="na">toDomain</span><span class="o">(</span><span class="n">userDto</span><span class="o">));</span>
   <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">userDtoMapper</span><span class="o">.</span><span class="na">toDto</span><span class="o">(</span><span class="n">createdUser</span><span class="o">),</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><div class="code-label"> Java</div></div></div><h4 id="service-métier-domain">Service Métier (domain)</h4><p>Il est responsable des <strong>validations métier</strong> qui sont spécifiques au domaine. Il s’agit par exemple de vérifier qu’un utilisateur n’existe pas déjà, ou qu’une règle métier spécifique est respectée (exemple : l’utilisateur doit être majeur).</p><p>Le domaine utilise des instructions standards du langage pour encapsuler ces validations dans les objets métier. Les <strong>exceptions métier</strong> sont levées si des règles sont violées.</p><p>La validation métier garantit que les règles métiers sont respectées. Cela permet de maintenir l’intégrité des données dans le domaine.</p><div class="code-container"><div class="code-window"><div class="window-header"><div class="window-controls"> <svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"> <g fill="none" fill-rule="evenodd" transform="translate(1 1)"> <circle cx="6" cy="6" r="6" fill="#EC6A5E" stroke="#EC6A5E" stroke-width=".5" /> <circle cx="26" cy="6" r="6" fill="#F4BF4F" stroke="#F4BF4F" stroke-width=".5" /> <circle cx="46" cy="6" r="6" fill="#61C554" stroke="#61C554" stroke-width=".5" /> </g> </svg></div><div class="window-copy"> <svg xmlns="http://www.w3.org/2000/svg" class="window-copy-icon" height="24" width="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path> </svg></div></div><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="nc">User</span> <span class="nf">createUser</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
   <span class="k">if</span> <span class="o">(</span><span class="n">userRepository</span><span class="o">.</span><span class="na">findUserByEmail</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getEmail</span><span class="o">()).</span><span class="na">isPresent</span><span class="o">())</span> <span class="o">{</span>
       <span class="k">throw</span> <span class="k">new</span> <span class="nf">BusinessRuleViolationException</span><span class="o">(</span><span class="s">"User already exists."</span><span class="o">);</span>
   <span class="o">}</span>
   <span class="k">return</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">saveUser</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><div class="code-label"> Java</div></div></div><h4 id="impacts-pour-les-autres-composants">Impacts pour les Autres Composants</h4><ul><li><strong>Adaptateurs d’entrée</strong> :<ul><li>En s’assurant que les données reçues sont valides dès la réception, les adaptateurs d’entrée permettent de <strong>réduire la complexité</strong> et le traitement des erreurs dans le domaine. En cas de validation échouée, les adaptateurs retournent directement une <strong>400 Bad Request</strong> avec un message explicatif.</li></ul></li><li><strong>Service métier</strong> :<ul><li>Si une validation échoue dans le service métier (par exemple, violation d’une règle métier), une <strong>exception spécifique</strong> (comme une <strong><code class="language-plaintext highlighter-rouge">BusinessRuleViolationException</code></strong>) est levée et capturée par l’adaptateur d’entrée pour renvoyer un <strong>409 Conflict</strong> ou un autre code HTTP approprié. Cela garantit que les règles métiers sont <strong>centrées</strong> dans le domaine et non dans l’infrastructure.</li></ul></li></ul><h4 id="avantages-et-inconvénients">Avantages et Inconvénients</h4><ul><li><strong>Avantages</strong> :<ul><li><strong>Séparation des responsabilités</strong> : Les validations de structure et de syntaxe sont gérées au niveau de l’adaptateur, tandis que les validations métiers sont concentrées dans le service métier.</li><li><strong>Clarté des erreurs</strong> : Les erreurs liées à des violations de règles métier ou à des formats incorrects sont clairement identifiées et renvoyées avec des codes HTTP appropriés (400, 409, etc.).</li></ul></li><li><strong>Inconvénients</strong> :<ul><li><strong>Duplication potentielle</strong> : Dans certains cas, une même validation pourrait être nécessaire à la fois dans l’adaptateur (pour des raisons de structure) et dans le domaine (pour des raisons métiers), ce qui peut entraîner de la duplication.</li><li><strong>Complexité supplémentaire</strong> : Bien que cette approche soit très modulaire et découplée, elle peut parfois rendre le système plus complexe à implémenter et maintenir.</li></ul></li></ul><p>En résumé, dans une architecture hexagonale, la validation des données est divisée entre les <strong>adaptateurs d’entrée</strong> et le <strong>service métier</strong>, avec une nette séparation entre les validations de structure et de syntaxe, et les validations métier. Ce découplage permet de rendre le système plus modulaire, mais demande une attention particulière pour éviter la duplication des validations.</p><hr class="hr-text" data-content="DTO" /><h2 id="7-rôle-des-dto-dans-larchitecture-hexagonale">7. Rôle des DTO dans l’Architecture Hexagonale</h2><p>Dans une architecture hexagonale, les <strong>DTO (Data Transfer Objects)</strong> servent à transférer des données entre les différentes couches de l’application, notamment entre les adaptateurs externes (comme les contrôleurs REST) et le domaine. Ils permettent de maintenir un <strong>découplage</strong> strict entre la logique métier et les interfaces externes tout en facilitant l’adaptation aux formats de données spécifiques à chaque couche.</p><h3 id="pourquoi-utiliser-des-dto-">Pourquoi Utiliser des DTO ?</h3><ul><li><p><strong>Séparation des Préoccupations</strong> :</p><p>Les DTO permettent de séparer la <strong>représentation des données</strong> dans les interfaces externes (API REST, UI) des objets métiers du domaine. Cela garantit que la logique métier encapsulée dans les objets métier n’est pas directement exposée aux adaptateurs externes.</p><p><em>Exemple</em> : Un <strong><code class="language-plaintext highlighter-rouge">UserDto</code></strong> utilisé pour transmettre les données d’un utilisateur via une API REST ne contient que les informations nécessaires (ID, nom, adresse), tandis que l’objet métier <strong><code class="language-plaintext highlighter-rouge">User</code></strong> encapsule des comportements et des règles métier plus complexes.</p></li></ul><div class="code-container"><div class="code-window"><div class="window-header"><div class="window-controls"> <svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"> <g fill="none" fill-rule="evenodd" transform="translate(1 1)"> <circle cx="6" cy="6" r="6" fill="#EC6A5E" stroke="#EC6A5E" stroke-width=".5" /> <circle cx="26" cy="6" r="6" fill="#F4BF4F" stroke="#F4BF4F" stroke-width=".5" /> <circle cx="46" cy="6" r="6" fill="#61C554" stroke="#61C554" stroke-width=".5" /> </g> </svg></div><div class="window-copy"> <svg xmlns="http://www.w3.org/2000/svg" class="window-copy-icon" height="24" width="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path> </svg></div></div><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>
  <span class="kd">private</span> <span class="nc">Address</span> <span class="n">address</span><span class="o">;</span> <span class="c1">// Classe qui contient les informations d'adresse de l'utilisateur</span>
  <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Order</span><span class="o">&gt;</span> <span class="n">orders</span><span class="o">;</span> <span class="c1">// Liste des commandes passées par l'utilisateur</span>

  <span class="c1">// Constructeurs, getters et setters...</span>
<span class="o">}</span></code></pre></figure><div class="code-label"> Java</div></div></div><div class="code-container"><div class="code-window"><div class="window-header"><div class="window-controls"> <svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"> <g fill="none" fill-rule="evenodd" transform="translate(1 1)"> <circle cx="6" cy="6" r="6" fill="#EC6A5E" stroke="#EC6A5E" stroke-width=".5" /> <circle cx="26" cy="6" r="6" fill="#F4BF4F" stroke="#F4BF4F" stroke-width=".5" /> <circle cx="46" cy="6" r="6" fill="#61C554" stroke="#61C554" stroke-width=".5" /> </g> </svg></div><div class="window-copy"> <svg xmlns="http://www.w3.org/2000/svg" class="window-copy-icon" height="24" width="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path> </svg></div></div><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserDto</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">address</span><span class="o">;</span> <span class="c1">// Adresse représentée sous forme de chaîne de caractères (ex: "123 Main St, City, Country")</span>

  <span class="c1">// Constructeurs, getters et setters...</span>
<span class="o">}</span></code></pre></figure><div class="code-label"> Java</div></div></div><ul><li><p><strong>Adaptation aux Formats de Données</strong> :</p><p>Les DTO permettent de mapper des données d’un format adapté aux besoins des clients externes (par exemple, JSON pour une API REST) vers des objets métier plus riches qui respectent les règles du domaine. Cela permet une flexibilité dans la transformation des données.</p><p><em>Exemple</em> : Un <strong><code class="language-plaintext highlighter-rouge">UserDtoMapper</code></strong> peut convertir un <code class="language-plaintext highlighter-rouge">UserDto</code> en objet métier <code class="language-plaintext highlighter-rouge">User</code> et vice-versa.</p></li></ul><div class="code-container"><div class="code-window"><div class="window-header"><div class="window-controls"> <svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"> <g fill="none" fill-rule="evenodd" transform="translate(1 1)"> <circle cx="6" cy="6" r="6" fill="#EC6A5E" stroke="#EC6A5E" stroke-width=".5" /> <circle cx="26" cy="6" r="6" fill="#F4BF4F" stroke="#F4BF4F" stroke-width=".5" /> <circle cx="46" cy="6" r="6" fill="#61C554" stroke="#61C554" stroke-width=".5" /> </g> </svg></div><div class="window-copy"> <svg xmlns="http://www.w3.org/2000/svg" class="window-copy-icon" height="24" width="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path> </svg></div></div><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserDtoMapper</span> <span class="o">{</span>
<span class="c1">// Méthode pour convertir un DTO en objet de domaine</span>
<span class="kd">public</span> <span class="nc">User</span> <span class="nf">toDomain</span><span class="o">(</span><span class="nc">UserDto</span> <span class="n">dto</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Address</span> <span class="n">address</span> <span class="o">=</span> <span class="n">parseAddress</span><span class="o">(</span><span class="n">dto</span><span class="o">.</span><span class="na">getAddress</span><span class="o">());</span> <span class="c1">// Conversion de l'adresse sous forme de String vers un objet Address</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">User</span><span class="o">(</span><span class="n">dto</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">dto</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">dto</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="n">address</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;());</span>
<span class="o">}</span>

<span class="c1">// Méthode pour convertir un objet de domaine en DTO</span>
<span class="kd">public</span> <span class="nc">UserDto</span> <span class="nf">toDto</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">address</span> <span class="o">=</span> <span class="n">formatAddress</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getAddress</span><span class="o">());</span> <span class="c1">// Conversion de l'objet Address en String</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">UserDto</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">user</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="n">address</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// Méthode utilitaire pour transformer une chaîne d'adresse en objet Address</span>
<span class="kd">private</span> <span class="nc">Address</span> <span class="nf">parseAddress</span><span class="o">(</span><span class="nc">String</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Suppose que l'adresse est sous forme de "123 Main St, City, Country"</span>
    <span class="nc">String</span><span class="o">[]</span> <span class="n">parts</span> <span class="o">=</span> <span class="n">address</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">", "</span><span class="o">);</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Address</span><span class="o">(</span><span class="n">parts</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="n">parts</span><span class="o">[</span><span class="mi">1</span><span class="o">],</span> <span class="n">parts</span><span class="o">[</span><span class="mi">2</span><span class="o">]);</span>
<span class="o">}</span>

<span class="c1">// Méthode utilitaire pour formater un objet Address en une chaîne de caractères</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="nf">formatAddress</span><span class="o">(</span><span class="nc">Address</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s, %s, %s"</span><span class="o">,</span> <span class="n">address</span><span class="o">.</span><span class="na">getStreet</span><span class="o">(),</span> <span class="n">address</span><span class="o">.</span><span class="na">getCity</span><span class="o">(),</span> <span class="n">address</span><span class="o">.</span><span class="na">getCountry</span><span class="o">());</span>
<span class="o">}</span>
<span class="o">}</span></code></pre></figure><div class="code-label"> Java</div></div></div><ul><li><p><strong>Protection du Domaine</strong> :</p><p>Les DTO offrent un contrôle sur les données exposées aux clients externes, en filtrant les informations sensibles ou inutiles dans le contexte de l’API. Cela protège l’intégrité des données du domaine et évite de dévoiler des détails techniques ou métier inutiles.</p><p><em>Exemple</em> : Un <strong><code class="language-plaintext highlighter-rouge">UserDto</code></strong> peut omettre des champs sensibles tels que des informations financières ou des mots de passe.</p></li></ul><h3 id="les-avantages-des-dto">Les Avantages des DTO</h3><ul><li><p><strong>Modularité</strong> : Le découplage entre les couches externes et le domaine permet une meilleure modularité du code. Les changements dans les DTO n’affectent pas directement le domaine, facilitant ainsi la maintenance.</p></li><li><p><strong>Réduction des Dépendances</strong> : Les couches externes n’ont pas besoin de connaître les détails internes du domaine, ce qui limite les dépendances entre les différentes couches de l’application.</p></li><li><p><strong>Adaptabilité et Évolutivité</strong> : Les DTO permettent d’adapter facilement le format des données en fonction des besoins des interfaces externes (ajout de champs, gestion des versions d’API) sans impacter la logique métier.</p></li></ul><h3 id="les-inconvénients-des-dto">Les Inconvénients des DTO</h3><ul><li><p><strong>Complexité Supplémentaire</strong> : L’utilisation de DTO nécessite de maintenir des classes supplémentaires ainsi que des mappers pour transformer les objets entre les couches, ce qui peut alourdir le code et augmenter la maintenance.</p></li><li><p><strong>Duplication Potentielle</strong> : Les DTO peuvent parfois dupliquer certaines informations présentes dans les objets métier, entraînant une surcharge de maintenance si les mappers ne sont pas bien gérés.</p></li></ul><h3 id="en-résumé-1">En Résumé</h3><p>L’utilisation des DTO dans une architecture hexagonale est essentielle pour maintenir l’indépendance du domaine vis-à-vis des technologies externes. Ils permettent de <strong>mapper les données</strong> entre les différentes couches de manière flexible, de <strong>protéger les objets métier</strong> contre l’exposition directe, et d’assurer une <strong>meilleure modularité</strong> de l’application. Cependant, cette approche introduit une certaine complexité et demande un effort supplémentaire pour maintenir les mappers et les DTO.</p><hr class="hr-text" data-content="Packages" /><h2 id="8-organisation-en-packages-du-domaine">8. Organisation en Packages du Domaine</h2><p>Une organisation claire et bien découpée des packages permet d’éviter les erreurs de conception et de bien identifier chaque composant du système. En isolant le domaine dans un module indépendant, on garantit que ce dernier ne soit pas pollué par des dépendances techniques ou des frameworks externes. Cette séparation permet de maintenir l’intégrité du domaine en protégeant sa logique métier des aspects techniques, tout en facilitant l’évolution de l’architecture au fil du temps.</p><p>Dans le cadre d’une architecture hexagonale, cette structure modulaire assure que les responsabilités soient bien définies entre le domaine, les ports (inbound et outbound) et les services, favorisant ainsi un découplage clair et une organisation cohérente du code.</p><div class="premonition info"> <i class="premonition pn-info"></i><div class="content"><p class="header">Package by Layer vs. Package by Feature</p><ul><li>L’approche <strong>Package by Layer</strong> consiste à organiser les classes par leur rôle technique, en les regroupant par couches transversales de l’architecture.</li><li>L’approche <strong>Package by Feature</strong> consiste à organiser les classes par fonctionnalité ou cas d’utilisation.</li></ul></div></div><p>Pour une architecture moderne, orientée vers la flexibilité et la capacité à évoluer rapidement (comme l’architecture hexagonale), le <strong>Package by Feature</strong> est recommandé, car il garantit une meilleure séparation des préoccupations et facilite la transformation de fonctionnalités en services autonomes.</p><h4 id="un-exemple-de-structure-des-packages-pour-le-cas-dutilisation-user">Un Exemple de Structure des Packages pour le cas d’utilisation “user”</h4><div class="code-container"><div class="code-window"><div class="window-header"><div class="window-controls"> <svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"> <g fill="none" fill-rule="evenodd" transform="translate(1 1)"> <circle cx="6" cy="6" r="6" fill="#EC6A5E" stroke="#EC6A5E" stroke-width=".5" /> <circle cx="26" cy="6" r="6" fill="#F4BF4F" stroke="#F4BF4F" stroke-width=".5" /> <circle cx="46" cy="6" r="6" fill="#61C554" stroke="#61C554" stroke-width=".5" /> </g> </svg></div><div class="window-copy"> <svg xmlns="http://www.w3.org/2000/svg" class="window-copy-icon" height="24" width="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path> </svg></div></div><figure class="highlight"><pre><code class="language-ascii" data-lang="ascii">domain/
├── common/
│   └── exceptions/
│       ├── BusinessRuleViolationException.java
│       └── ResourceNotFoundException.java
│   
└── user/
    ├── domain/
    │   └── User.java
    ├── port/
    │   ├── inbound/
    │   │   └── UserApiPort.java
    │   └── outbound/
    │       └── UserSpiPort.java
    └── service/
        └── UserApiService.java</code></pre></figure><div class="code-label"> Ascii</div></div></div><h3 id="détails-des-classes-et-interfaces">Détails des Classes et Interfaces</h3><ol><li><strong>Package <code class="language-plaintext highlighter-rouge">domain.common.exceptions</code></strong> :<ul><li>Le package contient des exceptions métier communes pour signaler des violations de règles ou l’absence de ressources, distinctes des exceptions techniques.</li><li>L’objectif est de centraliser ces exceptions pour maintenir la cohérence et l’encapsulation du domaine.</li></ul></li><li><strong>Package <code class="language-plaintext highlighter-rouge">domain.user</code></strong> :<ul><li><p>Le package <code class="language-plaintext highlighter-rouge">domain.user</code> regroupe l’ensemble des éléments liés au domaine métier “user”. En isolant toutes les classes, interfaces, et services pertinents dans ce package unique, plusieurs avantages sont obtenus :</p><ul><li><p><strong>Facilité d’Identification</strong> : Le package <code class="language-plaintext highlighter-rouge">domain.user</code> permet de regrouper tout ce qui est lié au domaine “user” en un seul endroit. Cela simplifie la compréhension et la navigation dans le code, car il est facile de repérer les composants associés à cette entité métier.</p></li><li><p><strong>Modularité et Réutilisabilité</strong> : En isolant le package <code class="language-plaintext highlighter-rouge">domain.user</code>, celui-ci devient <strong>modulaire</strong>. Cela facilite l’extensibilité du système, car de nouveaux comportements et services spécifiques à <code class="language-plaintext highlighter-rouge">user</code> peuvent être ajoutés sans impacter les autres parties du domaine.</p></li><li><p><strong>Facilité de Déplacement et Maintenance</strong> : Puisque le package <code class="language-plaintext highlighter-rouge">domain.user</code> est isolé, il peut facilement être déplacé, restructuré, ou même extrait vers un autre projet. Par exemple, si l’entité <code class="language-plaintext highlighter-rouge">user</code> devait être externalisée en tant que microservice indépendant, il serait relativement simple de le faire car toutes les classes et interfaces liées sont déjà bien encapsulées dans un package unique.</p></li><li><p><strong>Cohérence du Contexte Métier</strong> : Regrouper toutes les parties liées à <code class="language-plaintext highlighter-rouge">user</code> dans un seul package permet de préserver la <strong>cohérence du contexte métier</strong>. Tous les objets, services, ports (inbound et outbound) restent encapsulés dans un seul contexte, ce qui aide à éviter les dépendances circulaires et à garantir une séparation claire des préoccupations.</p></li></ul></li></ul></li><li><strong>Package <code class="language-plaintext highlighter-rouge">domain.user.port.inbound</code></strong> :<ul><li>Le package des ports inbound contient des interfaces définissant les cas d’utilisation exposés aux adaptateurs externes.</li><li>Ces interfaces servent de contrat entre les couches externes et la logique métier, décrivant les opérations fonctionnelles du domaine sans exposer sa logique interne.</li></ul></li><li><strong>Package <code class="language-plaintext highlighter-rouge">domain.user.port.outbound</code></strong> :<ul><li>Les ports outbound définissent des interfaces techniques permettant au domaine d’accéder aux systèmes externes (bases de données, services tiers, etc.).</li><li>Ils délèguent les tâches techniques tout en maintenant l’indépendance du domaine vis-à-vis des technologies sous-jacentes, assurant ainsi la flexibilité de l’infrastructure.</li></ul></li><li><strong>Package <code class="language-plaintext highlighter-rouge">domain.user.service</code></strong> :<ul><li>Le package des services contient les implémentations métier qui orchestrent les opérations des ports inbound et outbound.</li><li>Ces services implémentent les interfaces inbound, assurent la logique métier et délèguent les opérations techniques aux ports outbound.</li></ul></li></ol><p>Cette organisation permet de structurer le code en respectant les principes de <strong>séparation des préoccupations</strong> et <strong>découplage</strong> entre les couches métier et techniques, garantissant ainsi une architecture modulaire et facilement maintenable.</p><hr class="hr-text" data-content="Conclusion" /><h2 id="conclusion---au-delà-de-lhexagone">Conclusion - Au-delà de l’Hexagone</h2><p>L’architecture hexagonale, avec ses principes de découplage et de séparation des responsabilités, offre un cadre robuste et évolutif pour gérer la complexité d’une application moderne. Cependant, au-delà de ces choix techniques, d’autres dimensions de l’architecture logicielle méritent d’être explorées.</p><p>L’une des étapes naturelles après avoir maîtrisé l’architecture hexagonale est d’envisager la <strong>gestion de l’infrastructure</strong>. En effet, le découplage entre le domaine et l’infrastructure ouvre la porte à de nombreuses stratégies d’implémentation techniques : cloud computing, déploiement en conteneurs, microservices…</p><p>Chaque approche apporte ses propres défis et opportunités. Le passage à des architectures comme les <strong>microservices</strong> soulève également des questions sur la gestion de la distribution des services, la résilience et les compromis entre modularité et complexité opérationnelle.</p><p>Au-delà de l’infrastructure, d’autres architectures peuvent également être considérées.</p><p>Par exemple, <strong>l’architecture en couches</strong> reste une option viable pour les applications plus simples, où la séparation stricte entre le domaine et l’infrastructure n’est pas nécessaire. De même, les approches <strong>event-driven</strong> ou <strong>CQRS (Command Query Responsibility Segregation)</strong> se concentrent sur la gestion des événements et la scalabilité des applications complexes, avec des modèles d’implémentation souvent très différents mais complémentaires à l’architecture hexagonale.</p><p>Enfin, le choix des outils et des frameworks pour soutenir cette architecture doit être continuellement réévalué.</p><p>En conclusion, l’architecture hexagonale n’est qu’une pièce du puzzle. Elle offre une base solide, mais doit être constamment réfléchie et adaptée dans un contexte technologique plus large. L’infrastructure, l’outillage et l’intégration d’autres paradigmes architecturaux seront les clés pour construire des systèmes toujours plus évolutifs, résilients et performants.</p><div class="page-footer"><div class="page-share"><div class="social-left"><div class="social-item"> <span><svg width="23.75" height="19" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"/></svg></span></div><div class="page-tag"><ul><li><a class="tag" href="/tags#Hexagonal-Architecture" rel="tag">Hexagonal-Architecture</a></li><li><a class="tag" href="/tags#Domain" rel="tag">Domain</a></li><li><a class="tag" href="/tags#Software-Design" rel="tag">Software-Design</a></li><li><a class="tag" href="/tags#Clean-Architecture" rel="tag">Clean-Architecture</a></li><li><a class="tag" href="/tags#Craftsmanship" rel="tag">Craftsmanship</a></li></ul></div></div><div class="social-right"><div class="social-item"> <a href="mailto:?subject=Le%20Guide%20Ultime%20pour%20Ma%C3%AEtriser%20l'Architecture%20Hexagonale%20:%20Focus%20sur%20le%20Domaine&body=https://scalastic.io/hexagonal-architecture-domain/" title="Share on email" rel="noreferrer nofollow"><span><svg xmlns="http://www.w3.org/2000/svg" style="vertical-align: -0.25em;" height="30px" viewBox="0 0 512 512"><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"/></svg></span></a></div><div class="social-item"> <a href="https://bsky.app/intent/compose?text=Le%20Guide%20Ultime%20pour%20Ma%C3%AEtriser%20l'Architecture%20Hexagonale%20:%20Focus%20sur%20le%20Domaine%20https://scalastic.io/hexagonal-architecture-domain/" title="Share on Bluesky" rel="noreferrer nofollow"><span><svg xmlns="http://www.w3.org/2000/svg" style="vertical-align: -0.25em;" height="30px" viewBox="0 0 448 512"><path fill="currentColor" d="M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM224 247.4c14.5-30 54-85.8 90.7-113.3c26.5-19.9 69.3-35.2 69.3 13.7c0 9.8-5.6 82.1-8.9 93.8c-11.4 40.8-53 51.2-90 44.9c64.7 11 81.2 47.5 45.6 84c-67.5 69.3-97-17.4-104.6-39.6c0 0 0 0 0 0l-.3-.9c-.9-2.6-1.4-4.1-1.8-4.1s-.9 1.5-1.8 4.1c-.1 .3-.2 .6-.3 .9c0 0 0 0 0 0c-7.6 22.2-37.1 108.8-104.6 39.6c-35.5-36.5-19.1-73 45.6-84c-37 6.3-78.6-4.1-90-44.9c-3.3-11.7-8.9-84-8.9-93.8c0-48.9 42.9-33.5 69.3-13.7c36.7 27.5 76.2 83.4 90.7 113.3z"/></svg></span></a></div><div class="social-item"> <a href="https://mastodonshare.com/share?text=Le%20Guide%20Ultime%20pour%20Ma%C3%AEtriser%20l'Architecture%20Hexagonale%20:%20Focus%20sur%20le%20Domaine&url=https://scalastic.io/hexagonal-architecture-domain/" title="Share on Mastodon" rel="noreferrer nofollow"><span><svg xmlns="http://www.w3.org/2000/svg" style="vertical-align: -0.25em;" height="30px" viewBox="0 0 448 512"><path fill="currentColor" d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg></span></a></div><div class="social-item"> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://scalastic.io/hexagonal-architecture-domain/" title="Share on LinkedIn" rel="noreferrer nofollow"><span><svg style="vertical-align: -0.25em;" height="30px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></span></a></div></div></div></div><div class="page-author"><div class="author-pres"><div class="author-img"><picture> <source srcset="/assets/img/jean-jerome-levy-100-b6f0419a8.avif 1.0x, /assets/img/jean-jerome-levy-200-b6f0419a8.avif 2.0x" type="image/avif"> <source srcset="/assets/img/jean-jerome-levy-100-d8d6a15f3.webp 1.0x, /assets/img/jean-jerome-levy-200-d8d6a15f3.webp 2.0x" type="image/webp"> <source srcset="/assets/img/jean-jerome-levy-100-e7cb5d968.jpg 1.0x, /assets/img/jean-jerome-levy-200-e7cb5d968.jpg 2.0x" type="image/jpeg"> <img class="author-img" src="/assets/img/jean-jerome-levy-100-e7cb5d968.jpg" alt="Jean-Jerome Levy" width="512" height="512"> </picture></div><div class="author-info"><p class="intro">Ecrit par</p><a href="/jean-jerome-levy/"><h2 class="name">Jean-Jérôme Lévy</h2></a><p class="title">Consultant DevOps</p></div></div><div class="author-desc"><p>Professionnel chevronné dans le domaine de l’informatique, cumulant plus de 20 années d’expérience au sein de DSI de grandes entreprises, mon expertise diversifiée m’a permis de jouer un rôle clé dans de nombreux projets, caractérisés par la mise en place de pratiques DevOps innovantes.</p></div></div><div><h3>Vous aimerez peut-être aussi...</h3><div class="page-recomm"><div class="recomm"> <a class="recomm-link" href="/hexagonal-architecture/" aria-label="Tout Savoir sur l'Architecture Hexagonale : Kernel, Ports, Adapters"><h5>Tout Savoir sur l'Architecture Hexagonale : Kernel, Ports, Adapters</h5><div class="image-container"><picture> <source srcset="/assets/img/hexagonal-architecture-300-57fe62f01.avif 1.0x, /assets/img/hexagonal-architecture-600-57fe62f01.avif 2.0x" type="image/avif"> <source srcset="/assets/img/hexagonal-architecture-300-e4fc3c59c.webp 1.0x, /assets/img/hexagonal-architecture-600-e4fc3c59c.webp 2.0x" type="image/webp"> <source srcset="/assets/img/hexagonal-architecture-300-93c4ad514.jpg 1.0x, /assets/img/hexagonal-architecture-600-93c4ad514.jpg 2.0x" type="image/jpeg"> <img width="300" height="250" src="/assets/img/hexagonal-architecture-300-93c4ad514.jpg" alt="Tout Savoir sur l'Architecture Hexagonale : Kernel, Ports, Adapters"> </picture></div></a></div><div class="recomm"> <a class="recomm-link" href="/craftmanship/" aria-label="Au-delà du Code : Comment le Craftsmanship Transforme le Développement et le DevOps"><h5>Au-delà du Code : Comment le Craftsmanship Transforme le Développement et le DevOps</h5><div class="image-container"><picture> <source srcset="/assets/img/craftmanship-300-96e38b128.avif 1.0x, /assets/img/craftmanship-600-96e38b128.avif 2.0x" type="image/avif"> <source srcset="/assets/img/craftmanship-300-b7fd63793.webp 1.0x, /assets/img/craftmanship-600-b7fd63793.webp 2.0x" type="image/webp"> <source srcset="/assets/img/craftmanship-300-78811ddc3.jpg 1.0x, /assets/img/craftmanship-600-78811ddc3.jpg 2.0x" type="image/jpeg"> <img width="300" height="250" src="/assets/img/craftmanship-300-78811ddc3.jpg" alt="Au-delà du Code : Comment le Craftsmanship Transforme le Développement et le DevOps"> </picture></div></a></div><div class="recomm"> <a class="recomm-link" href="/complete-developer-guide/" aria-label="Manuel de Survie du Développeur pour Faire les Bons Choix"><h5>Manuel de Survie du Développeur pour Faire les Bons Choix</h5><div class="image-container"><picture> <source srcset="/assets/img/developer-guide-feature-delivery-300-33801ed34.avif 1.0x, /assets/img/developer-guide-feature-delivery-600-33801ed34.avif 2.0x" type="image/avif"> <source srcset="/assets/img/developer-guide-feature-delivery-300-718b08e77.webp 1.0x, /assets/img/developer-guide-feature-delivery-600-718b08e77.webp 2.0x" type="image/webp"> <source srcset="/assets/img/developer-guide-feature-delivery-300-f618cb8f7.jpg 1.0x, /assets/img/developer-guide-feature-delivery-600-f618cb8f7.jpg 2.0x" type="image/jpeg"> <img width="300" height="250" src="/assets/img/developer-guide-feature-delivery-300-f618cb8f7.jpg" alt="Manuel de Survie du Développeur pour Faire les Bons Choix"> </picture></div></a></div></div></div></div></div><div class='rocket'> <svg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'><path d='M2.81,14.12L5.64,11.29L8.17,10.79C11.39,6.41 17.55,4.22 19.78,4.22C19.78,6.45 17.59,12.61 13.21,15.83L12.71,18.36L9.88,21.19L9.17,17.66C7.76,17.66 7.76,17.66 7.05,16.95C6.34,16.24 6.34,16.24 6.34,14.83L2.81,14.12M5.64,16.95L7.05,18.36L4.39,21.03H2.97V19.61L5.64,16.95M4.22,15.54L5.46,15.71L3,18.16V16.74L4.22,15.54M8.29,18.54L8.46,19.78L7.26,21H5.84L8.29,18.54M13,9.5A1.5,1.5 0 0,0 11.5,11A1.5,1.5 0 0,0 13,12.5A1.5,1.5 0 0,0 14.5,11A1.5,1.5 0 0,0 13,9.5Z'/></svg></div></article></div><aside class="right-sidebar"><div class="share-links"><div class="share-item"> <a href="mailto:?subject=Le%20Guide%20Ultime%20pour%20Ma%C3%AEtriser%20l'Architecture%20Hexagonale%20:%20Focus%20sur%20le%20Domaine&body=https://scalastic.io/hexagonal-architecture-domain/" title="Share on email" rel="noreferrer nofollow"><span><svg xmlns="http://www.w3.org/2000/svg" style="vertical-align: -0.25em;" height="30px" viewBox="0 0 512 512"><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"/></svg></span></a></div><div class="share-item"> <a href="https://bsky.app/intent/compose?text=Le%20Guide%20Ultime%20pour%20Ma%C3%AEtriser%20l'Architecture%20Hexagonale%20:%20Focus%20sur%20le%20Domaine%20https://scalastic.io/hexagonal-architecture-domain/" title="Share on Bluesky" rel="noreferrer nofollow"><span><svg xmlns="http://www.w3.org/2000/svg" style="vertical-align: -0.25em;" height="30px" viewBox="0 0 448 512"><path fill="currentColor" d="M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM224 247.4c14.5-30 54-85.8 90.7-113.3c26.5-19.9 69.3-35.2 69.3 13.7c0 9.8-5.6 82.1-8.9 93.8c-11.4 40.8-53 51.2-90 44.9c64.7 11 81.2 47.5 45.6 84c-67.5 69.3-97-17.4-104.6-39.6c0 0 0 0 0 0l-.3-.9c-.9-2.6-1.4-4.1-1.8-4.1s-.9 1.5-1.8 4.1c-.1 .3-.2 .6-.3 .9c0 0 0 0 0 0c-7.6 22.2-37.1 108.8-104.6 39.6c-35.5-36.5-19.1-73 45.6-84c-37 6.3-78.6-4.1-90-44.9c-3.3-11.7-8.9-84-8.9-93.8c0-48.9 42.9-33.5 69.3-13.7c36.7 27.5 76.2 83.4 90.7 113.3z"/></svg></span></a></div><div class="share-item"> <a href="https://mastodonshare.com/share?text=Le%20Guide%20Ultime%20pour%20Ma%C3%AEtriser%20l'Architecture%20Hexagonale%20:%20Focus%20sur%20le%20Domaine&url=https://scalastic.io/hexagonal-architecture-domain/" title="Share on Mastodon" rel="noreferrer nofollow"><span><svg xmlns="http://www.w3.org/2000/svg" style="vertical-align: -0.25em;" height="30px" viewBox="0 0 448 512"><path fill="currentColor" d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg></span></a></div><div class="share-item"> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://scalastic.io/hexagonal-architecture-domain/" title="Share on LinkedIn" rel="noreferrer nofollow"><span><svg style="vertical-align: -0.25em;" height="30px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></span></a></div></div><div class="right-toc"></div></aside></div><script src="/scalastic.min.js"></script> <script> tocbot.init({ tocSelector: '.right-toc', contentSelector: '.wrap-content', headingSelector: 'h1, h2, h3', ignoreSelector: '.name', orderedList: false, }); </script></body></html>
